MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00002 ; | Gestion de 24 servos avec un PIC18F452                                                              
                                                                                                                            
                      00003 ; | Copyright (C) 2012 Charles RINCHEVAL (contact@digitalspirit.org)                                    
                                                                                                            |
                      00004 ; | Ce programme est libre, vous pouvez le redistribuer et/ou le modifier selon les termes de la Licence
                             Publique Générale GNU  |
                      00005 ; | publiée par la Free Software Foundation (version 2 ou bien toute autre version ultérieure choisie pa
                            r vous).                                |
                      00006 ; | Ce programme est distribué car potentiellement utile, mais SANS AUCUNE GARANTIE, ni explicite ni imp
                            licite,                                 |
                      00007 ; | y compris les garanties de commercialisation ou d'adaptation dans un but spécifique.                
                                                                                            |
                      00008 ; | Reportez-vous à la Licence Publique Générale GNU pour plus de détails.                              
                                                                                                            |
                      00009 ; | Vous devez avoir reçu une copie de la Licence Publique Générale GNU en même temps que ce programme ;
                                                                            |
                      00010 ; | si ce n'est pas le cas,                                                                             
                                                                                                                            
                      00011 ; | écrivez à la Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, État
                            s-Unis.                                 |
                      00012 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00013 ; 2004-11-19 : Lorsque la consigne est 0, le port reste à 1
                      00014 ; 2005-12-03 : Version finale débugguée en test sur Bleuette
                      00015 
                      00016         title           "Gestion de 24 servos !"
                      00017         processor       18F452
                      00018 
                      00019         #include                "p18F452.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC18F452 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2012 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      01254         LIST
                      00020         #include                "macro.inc"
                      00001 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00002 ; | Gestion de 24 servos avec un PIC18F452                                                              
                                                                                                                            
                      00003 ; | Copyright (C) 2012 Charles RINCHEVAL (contact@digitalspirit.org)                                    
                                                                                                            |
                      00004 ; | Ce programme est libre, vous pouvez le redistribuer et/ou le modifier selon les termes de la Licence
                             Publique Générale GNU  |
                      00005 ; | publiée par la Free Software Foundation (version 2 ou bien toute autre version ultérieure choisie pa
                            r vous).                                |
                      00006 ; | Ce programme est distribué car potentiellement utile, mais SANS AUCUNE GARANTIE, ni explicite ni imp
                            licite,                                 |
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  2
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00007 ; | y compris les garanties de commercialisation ou d'adaptation dans un but spécifique.                
                                                                                            |
                      00008 ; | Reportez-vous à la Licence Publique Générale GNU pour plus de détails.                              
                                                                                                            |
                      00009 ; | Vous devez avoir reçu une copie de la Licence Publique Générale GNU en même temps que ce programme ;
                                                                            |
                      00010 ; | si ce n'est pas le cas,                                                                             
                                                                                                                            
                      00011 ; | écrivez à la Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, État
                            s-Unis.                                 |
                      00012 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00013 ; Les macros !
                      00014 
                      00015 ;       NOLIST  ; Turn Off Listing File Output !
                      00016 
                      00017 ; Move Literal to F
                      00018 MOVLF   MACRO   literal, dest
                      00019                 movlw   literal
                      00020                 movwf   dest
                      00021                 ENDM
                      00022 
                      00023 ; Pour le DEBUG
                      00024 DON             MACRO
                      00025 ;               bsf             LATC, 7
                      00026 ;               bsf             LATC, 6
                      00027                 bsf             LATC, 5
                      00028                 ENDM
                      00029 
                      00030 DOFF    MACRO
                      00031 ;               bcf             LATC, 7
                      00032 ;               bcf             LATC, 6
                      00033                 bcf             LATC, 5
                      00034                 ENDM
                      00035 
                      00036 
                      00037 ; Move Literal to F Banked
                      00038 MOVLFB  MACRO   literal, dest
                      00039                 movlw   literal
                      00040                 movwf   dest, BANKED
                      00041                 ENDM
                      00042 
                      00043 ; Envoie un caractère sur le port série
                      00044 SEND    MACRO   char
                      00045                 movlw   char
                      00046                 movwf   TXREG
                      00047                 btfss   PIR1, TXIF
                      00048                 goto    $ - 2
                      00049                 ENDM
                      00050 
                      00051 ;       LIST
                      00021 
                      00022 ; Program Configuration Registers
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  3
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300000 FEFF           00023         __CONFIG    _CONFIG1H, _HSPLL_OSC_1H    ; _OSCS_OFF_1H & _EC_OSC_1H & 
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
                      00024         __CONFIG    _CONFIG2L, _BOR_OFF_2L & _PWRT_OFF_2L
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300002 FEFD           00025         __CONFIG    _CONFIG2H, _WDT_OFF_2H
                      00026 ;       __CONFIG    _CONFIG3H, _CCP2MX_OFF_3H
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300006 FF7A           00027         __CONFIG    _CONFIG4L, _STVR_OFF_4L & _LVP_OFF_4L & _DEBUG_ON_4L
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
300008 C0FF           00028         __CONFIG    _CONFIG5L, _CP0_OFF_5L & _CP1_OFF_5L & _CP2_OFF_5L & _CP3_OFF_5L 
                      00029 ;       __CONFIG    _CONFIG5H, _CPB_OFF_5H & _CPD_OFF_5H
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
30000A E0FF           00030         __CONFIG    _CONFIG6L, _WRT0_OFF_6L & _WRT1_OFF_6L & _WRT2_OFF_6L & _WRT3_OFF_6L 
                      00031 ;       __CONFIG    _CONFIG6H, _WRTC_OFF_6H & _WRTB_OFF_6H & _WRTD_OFF_6H
Warning[230]: __CONFIG has been deprecated for PIC18 devices.  Use directive CONFIG.
30000C 40FF           00032         __CONFIG    _CONFIG7L, _EBTR0_OFF_7L & _EBTR1_OFF_7L & _EBTR2_OFF_7L & _EBTR3_OFF_7L
                      00033 ;       __CONFIG    _CONFIG7H, _EBTRB_OFF_7H
                      00034 
                      00035 
                      00036 ; +--------------------------+
                      00037 ; | Définition de constantes |
                      00038 ; +--------------------------+
                      00039 
                      00040 #DEFINE         NBR_SERVO       .24
                      00041 
                      00042 #DEFINE         PHASE_1         0x00
                      00043 #DEFINE         PHASE_2         0x01
                      00044 #DEFINE         PHASE_3         0x02
                      00045 #DEFINE         PHASE_4         0x03
                      00046 
                      00047 #DEFINE         HEADER          0xFF    ; 0xAA (0b10101010)
                      00048 
                      00049 #DEFINE         COMMAND_INIT    'I'
                      00050 #DEFINE         COMMAND_PAUSE   'P'
                      00051 #DEFINE         COMMAND_RESUME  'R'
                      00052 #DEFINE         COMMAND_CLEAR   'C'
                      00053 #DEFINE         COMMAND_SET     'S'
                      00054 
                      00055         CBLOCK  0x00    ; zone access ram de la banque 0
  00000000            00056                 servo_cons0     : 1
  00000001            00057                 servo_cons1     : 1
  00000002            00058                 servo_cons2     : 1
  00000003            00059                 servo_cons3     : 1
  00000004            00060                 servo_cons4     : 1
  00000005            00061                 servo_cons5     : 1
  00000006            00062                 servo_cons6     : 1
  00000007            00063                 servo_cons7     : 1
  00000008            00064                 servo_cons8     : 1
  00000009            00065                 servo_cons9             : 1
  0000000A            00066                 servo_cons10    : 1
  0000000B            00067                 servo_cons11    : 1
  0000000C            00068                 servo_cons12    : 1
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  4
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000000D            00069                 servo_cons13    : 1
  0000000E            00070                 servo_cons14    : 1
  0000000F            00071                 servo_cons15    : 1
  00000010            00072                 servo_cons16    : 1
  00000011            00073                 servo_cons17    : 1
  00000012            00074                 servo_cons18    : 1
  00000013            00075                 servo_cons19    : 1
  00000014            00076                 servo_cons20    : 1
  00000015            00077                 servo_cons21    : 1
  00000016            00078                 servo_cons22    : 1
  00000017            00079                 servo_cons23    : 1
                      00080 
  00000018            00081                 servo_sorted    : 24
                      00082 
  0000003C            00083                 cmpt_pass               : 1             ; Le compteur de passage
  0000003D            00084                 current_cons    : 1             ; La consigne courante
  0000003E            00085                 current_servo   : 1     ; Offset du servo courant
  0000003F            00086                 current_qnt             : 1             ; Quantité de servo courante
                      00087 
  00000040            00088                 total_qnt               : 1             ; Quantité totale de servos qui y sont passés
  00000041            00089                 cons_prec               : 1             ; Valeur de la consigne précédente
                      00090 
  00000042            00091                 buf_PORTA               : 1             ; Les buffers des ports
  00000043            00092                 buf_PORTB               : 1
  00000044            00093                 buf_PORTC               : 1
  00000045            00094                 buf_PORTD               : 1
  00000046            00095                 buf_PORTE               : 1
                      00096 
  00000047            00097                 phase                   : 1             ; La phase courante
  00000048            00098                 phase_cmpt              : 1             ; Phase de comptage
                      00099 
                      00100 
                      00101                 ; Variables spécifiques pour le tri
  00000049            00102                 var_min                 : 1
  0000004A            00103                 var_max                 : 1
                      00104 
  0000004B            00105                 mask                    : 1
  0000004C            00106                 mask_tmp                : 1
                      00107 
  0000004D            00108                 buf_tab0                : 1
  0000004E            00109                 buf_tab1                : 1
  0000004F            00110                 buf_tab2                : 1
                      00111 
  00000050            00112                 cmpt_bcl                : 1
                      00113 
  00000051            00114                 tmp_FSR0L               : 1
                      00115 ;               tmp_FSR0H               : 1
                      00116 
  00000052            00117                 tmp_FSR1L               : 1
  00000053            00118                 tmp_FSR1H               : 1
                      00119 
  00000054            00120                 tmp_FSR2L               : 1
                      00121 ;               tmp_FSR2H               : 1
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  5
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00122 
  00000055            00123                 cmpt                    : 1
  00000056            00124                 bcl                             : 1
                      00125 
                      00126                 ; Masque de bit
                      00127                 ; Fini les mask de bit
                      00128         ;mask_recept0   : 1             ; Octets contenant les masques de bits
                      00129                 ;mask_recept1   : 1
                      00130                 ;mask_recept2   : 1
                      00131 
                      00132                 ;pos_recept             : 1             ; La position voulue
                      00133                 ;pos_recept1            : 1
                      00134                 ;pos_recept2            : 1
                      00135 
  00000057            00136                 received_counter : 1
  00000058            00137         pos_0   : 1
  00000059            00138         pos_1   : 1
  0000005A            00139         pos_2   : 1
  0000005B            00140         pos_3   : 1
  0000005C            00141         pos_4   : 1
                      00142 
  0000005D            00143         pos_5   : 1
  0000005E            00144         pos_6   : 1
  0000005F            00145         pos_7   : 1
  00000060            00146         pos_8   : 1
  00000061            00147         pos_9   : 1
                      00148 
  00000062            00149         pos_10   : 1
  00000063            00150         pos_11   : 1
  00000064            00151         pos_12   : 1
  00000065            00152         pos_13   : 1
                      00153 
  00000066            00154                 reception_control : 1
  00000067            00155                 pause_mode : 1
                      00156 
                      00157 ;               cmpt_word               : 1             ; Compteur d'octets
                      00158 ;               cmpt_maj                : 1
                      00159 
  00000068            00160                 wreg_backup : 1
                      00161 
  00000069            00162                 csaving_IN_FSR2L        : 1             ; Context saving
  0000006A            00163                 csaving_IN_FSR2H        : 1
                      00164 
  0000006B            00165                 csaving_OUT_FSR2L       : 1             ; Context saving
  0000006C            00166                 csaving_OUT_FSR2H       : 1
                      00167         ENDC
                      00168 
                      00169         CBLOCK 0x100    ; Zone Bank 1
  00000100            00170                 servo_nbr00     : 1
  00000101            00171                 servo_nbr01     : 1
  00000102            00172                 servo_nbr02     : 1
  00000103            00173                 servo_nbr03     : 1
  00000104            00174                 servo_nbr04     : 1
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  6
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000105            00175                 servo_nbr05     : 1
  00000106            00176                 servo_nbr06     : 1
  00000107            00177                 servo_nbr07     : 1
  00000108            00178                 servo_nbr08     : 1
  00000109            00179                 servo_nbr09     : 1
  0000010A            00180                 servo_nbr10     : 1
  0000010B            00181                 servo_nbr11     : 1
  0000010C            00182                 servo_nbr12     : 1
  0000010D            00183                 servo_nbr13     : 1
  0000010E            00184                 servo_nbr14     : 1
  0000010F            00185                 servo_nbr15     : 1
  00000110            00186                 servo_nbr16     : 1
  00000111            00187                 servo_nbr17     : 1
  00000112            00188                 servo_nbr18     : 1
  00000113            00189                 servo_nbr19     : 1
  00000114            00190                 servo_nbr20     : 1
  00000115            00191                 servo_nbr21     : 1
  00000116            00192                 servo_nbr22     : 1
  00000117            00193                 servo_nbr23     : 1
                      00194 
  00000118            00195                 servo_val00 : 1 ; 24 * 3 zones contenants les états des ports à chaque itération
  00000119            00196                 servo_val01 : 1
  0000011A            00197                 servo_val02 : 1
  0000011B            00198                 servo_val03 : 1
  0000011C            00199                 servo_val04 : 1
  0000011D            00200                 servo_val05 : 1
  0000011E            00201                 servo_val06 : 1
  0000011F            00202                 servo_val07 : 1
  00000120            00203                 servo_val08 : 1
  00000121            00204                 servo_val09 : 1
  00000122            00205                 servo_val10 : 1
  00000123            00206                 servo_val11 : 1
  00000124            00207                 servo_val12 : 1
  00000125            00208                 servo_val13 : 1
  00000126            00209                 servo_val14 : 1
  00000127            00210                 servo_val15 : 1
  00000128            00211                 servo_val16 : 1
  00000129            00212                 servo_val17 : 1
  0000012A            00213                 servo_val18 : 1
  0000012B            00214                 servo_val19 : 1
  0000012C            00215                 servo_val20 : 1
  0000012D            00216                 servo_val21 : 1
  0000012E            00217                 servo_val22 : 1
  0000012F            00218                 servo_val23 : 1
  00000130            00219                 servo_val24 : 1
  00000131            00220                 servo_val25 : 1
  00000132            00221                 servo_val26 : 1
  00000133            00222                 servo_val27 : 1
  00000134            00223                 servo_val28 : 1
  00000135            00224                 servo_val29 : 1
  00000136            00225                 servo_val30 : 1
  00000137            00226                 servo_val31 : 1
  00000138            00227                 servo_val32 : 1
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  7
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000139            00228                 servo_val33 : 1
  0000013A            00229                 servo_val34 : 1
  0000013B            00230                 servo_val35 : 1
  0000013C            00231                 servo_val36 : 1
  0000013D            00232                 servo_val37 : 1
  0000013E            00233                 servo_val38 : 1
  0000013F            00234                 servo_val39 : 1
  00000140            00235                 servo_val40 : 1
  00000141            00236                 servo_val41 : 1
  00000142            00237                 servo_val42 : 1
  00000143            00238                 servo_val43 : 1
  00000144            00239                 servo_val44 : 1
  00000145            00240                 servo_val45 : 1
  00000146            00241                 servo_val46 : 1
  00000147            00242                 servo_val47 : 1
  00000148            00243                 servo_val48 : 1
  00000149            00244                 servo_val49 : 1
  0000014A            00245                 servo_val50 : 1
  0000014B            00246                 servo_val51 : 1
  0000014C            00247                 servo_val52 : 1
  0000014D            00248                 servo_val53 : 1
  0000014E            00249                 servo_val54 : 1
  0000014F            00250                 servo_val55 : 1
  00000150            00251                 servo_val56 : 1
  00000151            00252                 servo_val57 : 1
  00000152            00253                 servo_val58 : 1
  00000153            00254                 servo_val59 : 1
  00000154            00255                 servo_val60 : 1
  00000155            00256                 servo_val61 : 1
  00000156            00257                 servo_val62 : 1
  00000157            00258                 servo_val63 : 1
  00000158            00259                 servo_val64 : 1
  00000159            00260                 servo_val65 : 1
  0000015A            00261                 servo_val66 : 1
  0000015B            00262                 servo_val67 : 1
  0000015C            00263                 servo_val68 : 1
  0000015D            00264                 servo_val69 : 1
  0000015E            00265                 servo_val70 : 1
  0000015F            00266                 servo_val71 : 1
                      00267         ENDC
                      00268 
                      00269         ; Reset Vector
000000                00270         org             0
000000 0000           00271         nop
000002 D15C           00272         bra             _init
                      00273 
                      00274 
                      00275         ; High Priority Vector
000008                00276         org             0x08
000008 0000           00277         nop
00000A D008           00278         bra             inth
                      00279 
                      00280         ; Low Priority Vector
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  8
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000018                00281         org             0x18
000018 0000           00282         nop
00001A D00D           00283         bra             intl
                      00284 
                      00285 
                      00286 
                      00287 ; High Priority Vector
00001C                00288 inth
                      00289         ; Pause ?
00001C 0E00           00290         movlw   0
00001E 6267           00291         cpfseq  pause_mode
000020 EF5B F001      00292         goto    inth_end
                      00293 
                      00294         ; "Switch" des interruptions
000024 B4F2           00295         btfsc   INTCON, TMR0IF
000026 EFE3 F000      00296         goto    _inth_Timer
                      00297 
00002A 90CD           00298         bcf             T1CON, TMR1ON
00002C 8ED5           00299         bsf             T0CON, TMR0ON
00002E B09E           00300         btfsc   PIR1, TMR1IF
000030 EFE3 F000      00301         goto    _inth_Timer
                      00302 
000034 0011           00303         retfie  FAST
                      00304 
                      00305 
                      00306 ; Low Priority Vector
000036                00307 intl
000036 BA9E           00308         btfsc   PIR1, RCIF
000038 EF1F F000      00309         goto    _intl_usart
00003C 0010           00310         retfie
                      00311 
                      00312 
                      00313 ; Interruption venant de l'USART
00003E                00314 _intl_usart
                      00315         ; Backup WREG
00003E 6E68           00316         movwf   wreg_backup
                      00317 
                      00318 ; 0: Reception de l'entete
000040 0E00           00319         movlw   0
000042 6257           00320         cpfseq  received_counter
000044 EF2A F000      00321         goto    _intl_usart_received_test_command
                      00322 
                      00323         ; Test si le premier est bien egal a 255
000048 0EFF           00324         movlw   HEADER
00004A 62AE           00325         cpfseq  RCREG
00004C EF6A F000      00326         goto    _int1_usart_clear
000050 EFDF F000      00327         goto    _intl_usart_end
                      00328 
                      00329 ; 1: Command
Warning[208]: Label truncated at 32 characters. (_intl_usart_received_test_command)
000054                00330 _intl_usart_received_test_command
000054 0E01           00331         movlw   .1
000056 6257           00332         cpfseq  received_counter
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE  9
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000058 EF6D F000      00333         goto    _intl_usart_received_test_pos0
                      00334 
                      00335 ; Test for set command
00005C                00336 _int1_usart_received_test_set
00005C 0E53           00337         movlw   COMMAND_SET
00005E 62AE           00338         cpfseq  RCREG
000060 EF34 F000      00339         goto    _int1_usart_received_test_init
000064 EFDF F000      00340         goto    _intl_usart_end
                      00341 
                      00342 ; Test for init command
000068                00343 _int1_usart_received_test_init
000068 0E49           00344         movlw   COMMAND_INIT
00006A 62AE           00345         cpfseq  RCREG
00006C EF3E F000      00346         goto    _int1_usart_received_test_pause
                      00347         ; Set all value to 0
000070 0E00           00348         movlw   0
000072 ECC9 F002      00349         call    setValue
000076 8AF2           00350         bsf     INTCON, TMR0IE
000078 EF5E F000      00351         goto    _int1_usart_received_send_ack
                      00352 
                      00353 ; Test for pause command
00007C                00354 _int1_usart_received_test_pause
00007C 0E50           00355         movlw   COMMAND_PAUSE
00007E 62AE           00356         cpfseq  RCREG
000080 EF47 F000      00357         goto    _int1_usart_received_test_resume
                      00358 
000084 6967           00359         setf    pause_mode, 1
000086 ECE2 F002      00360         call    clearAllOut
00008A EF5E F000      00361         goto    _int1_usart_received_send_ack
                      00362 
                      00363 ; Test for resume command
00008E                00364 _int1_usart_received_test_resume
00008E 0E52           00365         movlw   COMMAND_RESUME
000090 62AE           00366         cpfseq  RCREG
000092 EF4E F000      00367         goto    _int1_usart_received_test_clear
                      00368 
000096 6A67           00369         clrf    pause_mode
000098 EF5E F000      00370         goto    _int1_usart_received_send_ack
                      00371 
                      00372 ; Test for clear command
00009C                00373 _int1_usart_received_test_clear
00009C 0E43           00374         movlw   COMMAND_CLEAR
00009E 62AE           00375         cpfseq  RCREG
0000A0 EF65 F000      00376         goto    _intl_usart_unknow_command
                      00377 
0000A4 6A67           00378         clrf    pause_mode
                      00379         ; Set all value to 0
0000A6 0E00           00380         movlw   0
0000A8 ECC9 F002      00381         call    setValue
0000AC EF5E F000      00382         goto    _int1_usart_received_send_ack
                      00383 
                      00384         ; Si command n'est pas egal a 1, on clear et on quitte
0000B0 0E01           00385         movlw .1
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 10
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000B2 62AE           00386         cpfseq RCREG
0000B4 EF6A F000      00387         goto _int1_usart_clear
0000B8 EFDF F000      00388         goto _intl_usart_end
                      00389 
0000BC                00390 _int1_usart_received_send_ack
                      00391         SEND 'O'
0000BC 0E4F               M                 movlw   'O'
0000BE 6EAD               M                 movwf   TXREG
0000C0 A89E               M                 btfss   PIR1, TXIF
0000C2 EF60 F000          M                 goto    $ - 2
0000C6 EF6A F000      00392         goto _int1_usart_clear
                      00393 
0000CA                00394 _intl_usart_unknow_command
                      00395         SEND 'N'
0000CA 0E4E               M                 movlw   'N'
0000CC 6EAD               M                 movwf   TXREG
0000CE A89E               M                 btfss   PIR1, TXIF
0000D0 EF67 F000          M                 goto    $ - 2
0000D4                00396 _int1_usart_clear
0000D4 6A57           00397         clrf received_counter
0000D6 EFE0 F000      00398         goto _intl_usart_exit
                      00399 
                      00400 ; 2: Position 0
0000DA                00401 _intl_usart_received_test_pos0
0000DA 0E02           00402         movlw .2
0000DC 6257           00403         cpfseq received_counter
0000DE EF75 F000      00404         goto _intl_usart_received_test_pos1
0000E2 50AE           00405         movf RCREG, W
0000E4 6E58           00406         movwf pos_0
0000E6 EFDF F000      00407         goto _intl_usart_end
                      00408 
                      00409 ; 3: Position 1
0000EA                00410 _intl_usart_received_test_pos1
0000EA 0E03           00411         movlw .3
0000EC 6257           00412         cpfseq received_counter
0000EE EF7D F000      00413         goto _intl_usart_received_test_pos2
0000F2 50AE           00414         movf RCREG, W
0000F4 6E59           00415         movwf pos_1
0000F6 EFDF F000      00416         goto _intl_usart_end
                      00417 
                      00418 ; 4: Position 2
0000FA                00419 _intl_usart_received_test_pos2
0000FA 0E04           00420         movlw .4
0000FC 6257           00421         cpfseq received_counter
0000FE EF85 F000      00422         goto _intl_usart_received_test_pos3
000102 50AE           00423         movf RCREG, W
000104 6E5A           00424         movwf pos_2
000106 EFDF F000      00425         goto _intl_usart_end
                      00426 
                      00427 ; 5: Position 3
00010A                00428 _intl_usart_received_test_pos3
00010A 0E05           00429         movlw .5
00010C 6257           00430         cpfseq received_counter
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 11
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00010E EF8D F000      00431         goto _intl_usart_received_test_pos4
000112 50AE           00432         movf RCREG, W
000114 6E5B           00433         movwf pos_3
000116 EFDF F000      00434         goto _intl_usart_end
                      00435 
                      00436 ; 6: Position 4
00011A                00437 _intl_usart_received_test_pos4
00011A 0E06           00438         movlw 6
00011C 6257           00439         cpfseq received_counter
00011E EF95 F000      00440         goto _intl_usart_received_test_pos5
000122 50AE           00441         movf RCREG, W
000124 6E5C           00442         movwf pos_4
000126 EFDF F000      00443         goto _intl_usart_end
                      00444 
                      00445 ; 7: Position 5
00012A                00446 _intl_usart_received_test_pos5
00012A 0E07           00447         movlw .7
00012C 6257           00448         cpfseq received_counter
00012E EF9D F000      00449         goto _intl_usart_received_test_pos6
000132 50AE           00450         movf RCREG, W
000134 6E5D           00451         movwf pos_5
000136 EFDF F000      00452         goto _intl_usart_end
                      00453 
                      00454 ; 8: Position 6
00013A                00455 _intl_usart_received_test_pos6
00013A 0E08           00456         movlw .8
00013C 6257           00457         cpfseq received_counter
00013E EFA5 F000      00458         goto _intl_usart_received_test_pos7
000142 50AE           00459         movf RCREG, W
000144 6E5E           00460         movwf pos_6
000146 EFDF F000      00461         goto _intl_usart_end
                      00462 
                      00463 ; 9: Position 7
00014A                00464 _intl_usart_received_test_pos7
00014A 0E09           00465         movlw .9
00014C 6257           00466         cpfseq received_counter
00014E EFAD F000      00467         goto _intl_usart_received_test_pos8
000152 50AE           00468         movf RCREG, W
000154 6E5F           00469         movwf pos_7
000156 EFDF F000      00470         goto _intl_usart_end
                      00471 
                      00472 ; 10: Position 8
00015A                00473 _intl_usart_received_test_pos8
00015A 0E0A           00474         movlw .10
00015C 6257           00475         cpfseq received_counter
00015E EFB5 F000      00476         goto _intl_usart_received_test_pos9
000162 50AE           00477         movf RCREG, W
000164 6E60           00478         movwf pos_8
000166 EFDF F000      00479         goto _intl_usart_end
                      00480 
                      00481 ; 11: Position 9
00016A                00482 _intl_usart_received_test_pos9
00016A 0E0B           00483         movlw .11
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 12
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00016C 6257           00484         cpfseq received_counter
00016E EFBD F000      00485         goto _intl_usart_received_test_pos10
000172 50AE           00486         movf RCREG, W
000174 6E61           00487         movwf pos_9
000176 EFDF F000      00488         goto _intl_usart_end
                      00489 
                      00490 ; 12: Position 10
00017A                00491 _intl_usart_received_test_pos10
00017A 0E0C           00492         movlw .12
00017C 6257           00493         cpfseq received_counter
00017E EFC5 F000      00494         goto _intl_usart_received_test_pos11
000182 50AE           00495         movf RCREG, W
000184 6E62           00496         movwf pos_10
000186 EFDF F000      00497         goto _intl_usart_end
                      00498 
                      00499 ; 13: Position 11
00018A                00500 _intl_usart_received_test_pos11
00018A 0E0D           00501         movlw .13
00018C 6257           00502         cpfseq received_counter
00018E EFCD F000      00503         goto _intl_usart_received_test_pos12
000192 50AE           00504         movf RCREG, W
000194 6E63           00505         movwf pos_11
000196 EFDF F000      00506         goto _intl_usart_end
                      00507 
                      00508 ; 14: Position 12
00019A                00509 _intl_usart_received_test_pos12
00019A 0E0E           00510         movlw .14
00019C 6257           00511         cpfseq received_counter
00019E EFD5 F000      00512         goto _intl_usart_received_test_pos13
0001A2 50AE           00513         movf RCREG, W
0001A4 6E64           00514         movwf pos_12
0001A6 EFDF F000      00515         goto _intl_usart_end
                      00516 
                      00517 ; 15: Position 13
0001AA                00518 _intl_usart_received_test_pos13
0001AA 0E0F           00519         movlw .15
0001AC 6257           00520         cpfseq received_counter
0001AE EFDD F000      00521         goto _intl_usart_received_test_control
0001B2 50AE           00522         movf RCREG, W
0001B4 6E65           00523         movwf pos_13
0001B6 EFDF F000      00524         goto _intl_usart_end
                      00525 
                      00526 ; 17: Control byte
Warning[208]: Label truncated at 32 characters. (_intl_usart_received_test_control)
0001BA                00527 _intl_usart_received_test_control
0001BA 50AE           00528         movf RCREG, W
0001BC 6E66           00529         movwf reception_control
                      00530 
0001BE                00531 _intl_usart_end
0001BE 2A57           00532         incf received_counter
                      00533 
0001C0                00534 _intl_usart_exit
                      00535         ; Restore WREG
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 13
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0001C0 0E68           00536         movlw   wreg_backup
0001C2 9A9E           00537         bcf             PIR1, RCIF
0001C4 0010           00538         retfie
                      00539 
                      00540 
                      00541 
                      00542 
                      00543 ; Interruption du Timer
0001C6                00544 _inth_Timer
                      00545 
                      00546         ; Aiguillage vers la bonne phase
0001C6 B248           00547         btfsc   phase_cmpt, .1
0001C8 EF46 F001      00548         goto    phase3
                      00549 
                      00550 
                      00551 ; ###########
                      00552 ; # PHASE 1 #
                      00553 ; ###########
                      00554 
0001CC ECA3 F003      00555         call    sort
                      00556 
0001D0 0E48           00557         movlw   0x48                            ; Ajout hugo, le 10/02/2005
0001D2 6ECF           00558         movwf   TMR1H                           ; Pour être sûr que la période soit de 20ms
0001D4 0EA0           00559         movlw   0xA0
0001D6 6ECE           00560         movwf   TMR1L
0001D8 80CD           00561         bsf             T1CON, TMR1ON           ; Pour revenir dans 20ms
                      00562 
0001DA ECEC F002      00563         call    setAllPort                      ; Allumage des ports !
                      00564 
                      00565 
                      00566         ; Tempo de 400us, oui, c'est dommage ...
                      00567         ; ... on pourrait se servir de ce temps pour autre chose ...
                      00568         ; ... il faut donc refaire la routine de tri !
0001DE 0EFF           00569         movlw   0xFF
0001E0 6E50           00570         movwf   cmpt_bcl
0001E2                00571 bcl_toto
0001E2 D000           00572         bra             $ + 2
0001E4 D000           00573         bra             $ + 2
0001E6 D000           00574         bra             $ + 2
0001E8 D000           00575         bra             $ + 2
0001EA D000           00576         bra             $ + 2
0001EC D000           00577         bra             $ + 2
0001EE 2E50           00578         decfsz  cmpt_bcl
0001F0 D7F8           00579         bra             bcl_toto
                      00580 
0001F2 D0             00581         fill(bra        $ + 2), 64      ; 64 -> Passage en repos à l'état bas
                      00582 
                      00583 
                      00584 ; ###########
                      00585 ; # PHASE 2 #
                      00586 ; ###########
                      00587         
000256 EE00 F018      00588         lfsr    FSR0, servo_sorted      ; Pointeur de consignes
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 14
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00025A EE11 F018      00589         lfsr    FSR1, servo_val00       ; Pointeur des ports actifs
00025E EE21 F000      00590         lfsr    FSR2, servo_nbr00       ; Pointeur de la quantité courante
                      00591 
000262 6A40           00592         clrf    total_qnt
000264 6A41           00593         clrf    cons_prec
                      00594 
000266                00595 phase2
000266 50EF           00596         movf    INDF0, W
000268 6E3D           00597         movwf   current_cons            ; La consigne courante
                      00598 
00026A 5041           00599         movf    cons_prec, W
00026C 5E3D           00600         subwf   current_cons, F         ; On ne compte que le décalage par rapport au précédent
                      00601 
00026E E019           00602         bz              phase4                          ; Consigne courante à 0 ?
                      00603 
000270 50EF           00604         movf    INDF0, W
000272 6E41           00605         movwf   cons_prec
                      00606 
000274 0E01           00607         movlw   .1
000276 6E3C           00608         movwf   cmpt_pass
                      00609 
                      00610 
000278 6848           00611         setf    phase_cmpt                      ; Phase de comptage
                      00612 
                      00613 
00027A 0000           00614         nop                                                     ; Très important pour la précision !
00027C 0000           00615         nop                                                     ; Ne pas toucher !!
                      00616 
00027E 0000           00617         nop             ; Ajout pour passage en mode repos niveau haut
000280 0000           00618         nop             ; "
000282 0000           00619         nop             ; "
                      00620 
000284 0000           00621         nop
000286 0000           00622         nop
000288 0000           00623         nop
00028A 0000           00624         nop
                      00625 
                      00626 ; ###########
                      00627 ; # PHASE 3 #
                      00628 ; ###########
00028C                00629 phase3
00028C 0EFF           00630         movlw   0xFF
00028E 6ED7           00631         movwf   TMR0H
                      00632 
000290 0EE1           00633         movlw   0xE1
                      00634 
000292 6ED6           00635         movwf   TMR0L
                      00636 
000294 0000           00637         nop
                      00638 
000296 2A3C           00639         incf    cmpt_pass                       ; Incrémente le compteur
                      00640 
000298 503D           00641         movf    current_cons, W
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 15
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00029A 643C           00642         cpfsgt  cmpt_pass                       ; Si cmpt est supérieur à la consigne courante, on skip
00029C D00C           00643         bra             inth_end
                      00644 
00029E 6A48           00645         clrf    phase_cmpt                      ; Sinon, on a fini de compter
                      00646 
                      00647 
                      00648 ; ###########
                      00649 ; # PHASE 4 #
                      00650 ; ###########
0002A0 0000           00651         nop
0002A2                00652 phase4
0002A2 EC5C F003      00653         call    clrPort                         ; Extinction du ou des servos courants
                      00654 
0002A6 50DE           00655         movf    POSTINC2, W                     ; Addition de la quantité courante ...
0002A8 2640           00656         addwf   total_qnt, F            ; ... et de la quantité de servos déjà passés
                      00657 
0002AA 2AE9           00658         incf    FSR0L
0002AC 0000           00659         nop
                      00660 
0002AE 0E17           00661         movlw   NBR_SERVO - 1
0002B0 6440           00662         cpfsgt  total_qnt                       ; Si le total de servo déjà passé est égal au nombre de 
                            servo, on skip !
0002B2 D7D9           00663         bra             phase2
                      00664 
                      00665 
                      00666 ; ###########
                      00667 ; # PHASE 5 #
                      00668 ; ###########
                      00669 
                      00670 ;       movlw   0x61                            ; Supprimé hugo, le 10/02/2005
                      00671 ;       movwf   TMR1H                           ; Pour être sûr que la période soit de 20ms
                      00672 ;       movlw   0xFF                            ; ... 0xFF pour 20ms pile poil !
                      00673 ;       movwf   TMR1L
                      00674 
0002B4 9ED5           00675         bcf             T0CON, TMR0ON
                      00676 ;       bsf             T1CON, TMR1ON           ; Supprimé hugo, le 10/02/2005
                      00677 
                      00678 ; On sort de l'interruption
0002B6                00679 inth_end
0002B6 909E           00680         bcf             PIR1, TMR1IF
0002B8 94F2           00681         bcf             INTCON, TMR0IF
0002BA 0011           00682         retfie  FAST
                      00683 
                      00684 
                      00685         #include "init.inc"
                      00001 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00002 ; | Gestion de 24 servos avec un PIC18F452                                                              
                                                                                                                            
                      00003 ; | Copyright (C) 2012 Charles RINCHEVAL (contact@digitalspirit.org)                                    
                                                                                                            |
                      00004 ; | Ce programme est libre, vous pouvez le redistribuer et/ou le modifier selon les termes de la Licence
                             Publique Générale GNU  |
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 16
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00005 ; | publiée par la Free Software Foundation (version 2 ou bien toute autre version ultérieure choisie pa
                            r vous).                                |
                      00006 ; | Ce programme est distribué car potentiellement utile, mais SANS AUCUNE GARANTIE, ni explicite ni imp
                            licite,                                 |
                      00007 ; | y compris les garanties de commercialisation ou d'adaptation dans un but spécifique.                
                                                                                            |
                      00008 ; | Reportez-vous à la Licence Publique Générale GNU pour plus de détails.                              
                                                                                                            |
                      00009 ; | Vous devez avoir reçu une copie de la Licence Publique Générale GNU en même temps que ce programme ;
                                                                            |
                      00010 ; | si ce n'est pas le cas,                                                                             
                                                                                                                            
                      00011 ; | écrivez à la Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, État
                            s-Unis.                                 |
                      00012 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00013 ; Initialisation du bouzin !
                      00014 
0002BC                00015 _init
                      00016 
                      00017         ; Configuration des ports
                      00018         MOVLF   b'00000000', TRISA
0002BC 0E00               M                 movlw   b'00000000'
0002BE 6E92               M                 movwf   TRISA
                      00019         MOVLF   b'00000000', TRISB
0002C0 0E00               M                 movlw   b'00000000'
0002C2 6E93               M                 movwf   TRISB
                      00020         MOVLF   b'10000000', TRISC
0002C4 0E80               M                 movlw   b'10000000'
0002C6 6E94               M                 movwf   TRISC
                      00021         MOVLF   b'00000000', TRISD
0002C8 0E00               M                 movlw   b'00000000'
0002CA 6E95               M                 movwf   TRISD
                      00022         MOVLF   b'00000000', TRISE
0002CC 0E00               M                 movlw   b'00000000'
0002CE 6E96               M                 movwf   TRISE
                      00023 
                      00024         ; Initialisation des ports
                      00025         MOVLF   b'00000000', PORTA
0002D0 0E00               M                 movlw   b'00000000'
0002D2 6E80               M                 movwf   PORTA
                      00026         MOVLF   b'00000000', PORTB
0002D4 0E00               M                 movlw   b'00000000'
0002D6 6E81               M                 movwf   PORTB
                      00027         MOVLF   b'00000000', PORTC
0002D8 0E00               M                 movlw   b'00000000'
0002DA 6E82               M                 movwf   PORTC
                      00028         MOVLF   b'00000000', PORTD
0002DC 0E00               M                 movlw   b'00000000'
0002DE 6E83               M                 movwf   PORTD
                      00029         MOVLF   b'00000000', PORTE
0002E0 0E00               M                 movlw   b'00000000'
0002E2 6E84               M                 movwf   PORTE
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 17
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00030 
                      00031         ; RCON REGISTER
                      00032         ; +------+---+---+----+----+----+-----+-----+
                      00033         ; | IPEN |  |  | RI | TO | PD | POR | BOR |
                      00034         ; +------+---+---+----+----+----+-----+-----+
                      00035         ; bit 7
                      00036         ;       IPEN: Interrupt Priority Enable bit
                      00037         ;       1 = Enable priority levels on interrupts
                      00038         ;       0 = Disable prioyarity levels on interrupts (16CXXX Compatibility mode)
                      00039         ; bit 6-5 Unimplemented: Read as '0'
                      00040         ; bit 4 RI: RESET Instruction Flag bit
                      00041         ;       1 = The RESET instruction was not executed
                      00042         ;       0 = The RESET instruction was executed causing a device RESET
                      00043         ;       (must be set in software after a Brown-out Reset occurs)
                      00044         ; bit 3 TO: Watchdog Time-out Flag bit
                      00045         ;       1 = After power-up, CLRWDT instruction, or SLEEP instruction
                      00046         ;       0 = A WDT time-out occurred
                      00047         ; bit 2 PD: Power-down Detection Flag bit
                      00048         ;       1 = After power-up or by the CLRWDT instruction
                      00049         ;       0 = By execution of the SLEEP instruction
                      00050         ; bit 1 POR: Power-on Reset Status bit
                      00051         ;       1 = A Power-on Reset has not occurred
                      00052         ;       0 = A Power-on Reset occurred
                      00053         ;       (must be set in software after a Power-on Reset occurs)
                      00054         ; bit 0 BOR: Brown-out Reset Status bit
                      00055         ;       1 = A Brown-out Reset has not occurred
                      00056         ;       0 = A Brown-out Reset occurred
                      00057         ;       (must be set in software after a Brown-out Reset occurs)
                      00058         MOVLF   b'10000000', RCON
0002E4 0E80               M                 movlw   b'10000000'
0002E6 6ED0               M                 movwf   RCON
                      00059 
                      00060         ; INTCON Register
                      00061         ; +----------+-----------+--------+--------+------+--------+--------+------+
                      00062         ; | GIE/GIEH | PEIE/GIEL | TMR0IE | INT0IE | RBIE | TMR0IF | INT0IF | RBIF |
                      00063         ; +----------+-----------+--------+--------+------+--------+--------+------+
                      00064         ; bit 7 GIE/GIEH: Global Interrupt Enable bit
                      00065         ;       When IPEN = 0:
                      00066         ;               1 = Enables all unmasked interrupts
                      00067         ;               0 = Disables all interrupts
                      00068         ;       When IPEN = 1:
                      00069         ;               1 = Enables all high priority interrupts
                      00070         ;               0 = Disables all interrupts
                      00071         ; bit 6 PEIE/GIEL: Peripheral Interrupt Enable bit
                      00072         ;       When IPEN = 0:
                      00073         ;               1 = Enables all unmasked peripheral interrupts
                      00074         ;               0 = Disables all peripheral interrupts
                      00075         ;       When IPEN = 1:
                      00076         ;               1 = Enables all low priority peripheral interrupts
                      00077         ;               0 = Disables all low priority peripheral interrupts
                      00078         ; bit 5 TMR0IE: TMR0 Overflow Interrupt Enable bit
                      00079         ;       1 = Enables the TMR0 overflow interrupt
                      00080         ;       0 = Disables the TMR0 overflow interrupt
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 18
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00081         ; bit 4 INT0IE: INT0 External Interrupt Enable bit
                      00082         ;       1 = Enables the INT0 external interrupt
                      00083         ;       0 = Disables the INT0 external interrupt
                      00084         ; bit 3 RBIE: RB Port Change Interrupt Enable bit
                      00085         ;       1 = Enables the RB port change interrupt
                      00086         ;       0 = Disables the RB port change interrupt
                      00087         ; bit 2 TMR0IF: TMR0 Overflow Interrupt Flag bit
                      00088         ;       1 = TMR0 register has overflowed (must be cleared in software)
                      00089         ;       0 = TMR0 register did not overflow
                      00090         ; bit 1 INT0IF: INT0 External Interrupt Flag bit
                      00091         ;       1 = The INT0 external interrupt occurred (must be cleared in software)
                      00092         ;       0 = The INT0 external interrupt did not occur
                      00093         ; bit 0 RBIF: RB Port Change Interrupt Flag bit
                      00094         ;       1 = At least one of the RB7:RB4 pins changed state (must be cleared in software)
                      00095         ;       0 = None of the RB7:RB4 pins have changed state
                      00096         MOVLF   b'00100100', INTCON
0002E8 0E24               M                 movlw   b'00100100'
0002EA 6EF2               M                 movwf   INTCON
                      00097         ;bsf            INTCON, TMR0IF
                      00098 
                      00099         ; INTCON2 Register
                      00100         ; +------+---------+---------+---------+---+--------+---+------+
                      00101         ; | RBPU | INTEDG0 | INTEDG1 | INTEDG2 |  | TMR0IP |  | RBIP |
                      00102         ; +------+---------+---------+---------+---+--------+---+------+
                      00103         ; bit 7 RBPU: PORTB Pull-up Enable bit
                      00104         ;       1 = All PORTB pull-ups are disabled
                      00105         ;       0 = PORTB pull-ups are enabled by individual port latch values
                      00106         ; bit 6 INTEDG0:External Interrupt0 Edge Select bit
                      00107         ;       1 = Interrupt on rising edge
                      00108         ;       0 = Interrupt on falling edge
                      00109         ; bit 5 INTEDG1: External Interrupt1 Edge Select bit
                      00110         ;       1 = Interrupt on rising edge
                      00111         ;       0 = Interrupt on falling edge
                      00112         ; bit 4 INTEDG2: External Interrupt2 Edge Select bit
                      00113         ;       1 = Interrupt on rising edge
                      00114         ;       0 = Interrupt on falling edge
                      00115         ; bit 3 Unimplemented: Read as '1'
                      00116         ; bit 2 TMR0IP: TMR0 Overflow Interrupt Priority bit
                      00117         ;       1 = TMR0 Overflow Interrupt is a high priority event
                      00118         ;       0 = TMR0 Overflow Interrupt is a low priority event
                      00119         ; bit 1 Unimplemented: Read as '1'
                      00120         ; bit 0 RBIP: RB Port Change Interrupt Priority bit
                      00121         ;       1 = RB Port Change Interrupt is a high priority event
                      00122         ;       0 = RB Port Change Interrupt is a low priority event
                      00123         MOVLF   b'10001110', INTCON2
0002EC 0E8E               M                 movlw   b'10001110'
0002EE 6EF1               M                 movwf   INTCON2
                      00124 
                      00125 
                      00126         ; T0CON: TIMER0 CONTROL REGISTER
                      00127         ; +--------+--------+------+------+-----+-------+-------+-------+
                      00128         ; | TMR0ON | T08BIT | T0CS | T0SE | PSA | T0PS2 | T0PS1 | T0PS0 |
                      00129         ; +--------+--------+------+------+-----+-------+-------+-------+
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 19
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00130         ; bit 7 TMR0ON: Timer0 On/Off Control bit
                      00131         ;       1 = Enables Timer0
                      00132         ;       0 = Stops Timer0
                      00133         ; bit 6 T08BIT: Timer0 8-bit/16-bit Control bit
                      00134         ;       1 = Timer0 is configured as an 8-bit timer/counter
                      00135         ;       0 = Timer0 is configured as a 16-bit timer/counter
                      00136         ; bit 5 T0CS: Timer0 Clock Source Select bit
                      00137         ;       1 = Transition on T0CKI pin
                      00138         ;       0 = Internal instruction cycle clock (CLKO)
                      00139         ; bit 4 T0SE: Timer0 Source Edge Select bit
                      00140         ;       1 = Increment on high-to-low transition on T0CKI pin
                      00141         ;       0 = Increment on low-to-high transition on T0CKI pin
                      00142         ; bit 3 PSA: Timer0 Prescaler Assignment bit
                      00143         ;       1 = TImer0 prescaler is NOT assigned. Timer0 clock input bypasses prescaler.
                      00144         ;       0 = Timer0 prescaler is assigned. Timer0 clock input comes from prescaler output.
                      00145         ; bit 2-0 T0PS2:T0PS0: Timer0 Prescaler Select bits
                      00146         ;       111 = 1:256 prescale value
                      00147         ;       110 = 1:128 prescale value
                      00148         ;       101 = 1:64 prescale value 
                      00149         ;       100 = 1:32 prescale value
                      00150         ;       011 = 1:16 prescale value
                      00151         ;       010 = 1:8 prescale value
                      00152         ;       001 = 1:4 prescale value
                      00153         ;       000 = 1:2 prescale value
                      00154 ;       MOVLF   b'10010010', T0CON
                      00155 ;#DEFINE        T0CON_VALUE     b'10010000'
                      00156 ;       MOVLF   T0CON_VALUE, T0CON
                      00157         MOVLF   b'10010000', T0CON
0002F0 0E90               M                 movlw   b'10010000'
0002F2 6ED5               M                 movwf   T0CON
                      00158 
                      00159 
                      00160         ; T2CON Register
                      00161         ; +---+---------+---------+---------+---------+--------+---------+---------+
                      00162         ; |      | TOUTPS3 | TOUTPS2 | TOUTPS1 | TOUTPS0 | TMR2ON | T2CKPS1 | T2CKPS0 |
                      00163         ; +---+---------+---------+---------+---------+--------+---------+---------+
                      00164         ; bit 7 Unimplemented: Read as '0'
                      00165         ; bit 6-3 TOUTPS3:TOUTPS0: Timer2 Output Postscale Select bits
                      00166         ; 0000 = 1:1 Postscale
                      00167         ; 0001 = 1:2 Postscale
                      00168         ; 
                      00169         ; 
                      00170         ; 
                      00171         ; 1111 = 1:16 Postscale
                      00172         ; bit 2 TMR2ON: Timer2 On bit
                      00173         ;       1 = Timer2 is on
                      00174         ;       0 = Timer2 is off
                      00175         ; bit 1-0 T2CKPS1:T2CKPS0: Timer2 Clock Prescale Select bits
                      00176         ;       00 = Prescaler is 1
                      00177         ;       01 = Prescaler is 4
                      00178         ;       1x = Prescaler is 16
                      00179         MOVLF   b'00000000', T2CON
0002F4 0E00               M                 movlw   b'00000000'
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 20
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0002F6 6ECA               M                 movwf   T2CON
                      00180 
                      00181 ;       bsf             PIE1, TMR2IE
                      00182 ;       MOVLF   b'11111111', PR2
                      00183 
                      00184 
                      00185         ; T3CON: TIMER3 CONTROL REGISTER
                      00186         ; +------+--------+---------+---------+--------+-------+---------+--------+
                      00187         ; | RD16 | T3CCP2 | T3CKPS1 | T3CKPS0 | T3CCP1 | T3SYN |C TMR3CS | TMR3ON |
                      00188         ; +------+--------+---------+---------+--------+-------+---------+--------+
                      00189         ; bit 7 RD16: 16-bit Read/Write Mode Enable bit
                      00190         ;       1 = Enables register Read/Write of Timer3 in one 16-bit operation
                      00191         ;       0 = Enables register Read/Write of Timer3 in two 8-bit operations
                      00192         ; bit 6-3 T3CCP2:T3CCP1: Timer3 and Timer1 to CCPx Enable bits
                      00193         ;       1x = Timer3 is the clock source for compare/capture CCP modules
                      00194         ;       01 = Timer3 is the clock source for compare/capture of CCP2, Timer1 is the clock source 
                            for compare/capture of CCP1
                      00195         ;       00 = Timer1 is the clock source for compare/capture CCP modules
                      00196         ; bit 5-4 T3CKPS1:T3CKPS0: Timer3 Input Clock Prescale Select bits
                      00197         ;       11 = 1:8 Prescale value
                      00198         ;       10 = 1:4 Prescale value
                      00199         ;       01 = 1:2 Prescale value
                      00200         ;       00 = 1:1 Prescale value
                      00201         ; bit 2 T3SYNC: Timer3 External Clock Input Synchronization Control bit
                      00202         ;       (Not usable if the system clock comes from Timer1/Timer3)
                      00203         ;       When TMR3CS = 1:
                      00204         ;               1 = Do not synchronize external clock input
                      00205         ;               0 = Synchronize external clock input
                      00206         ;       When TMR3CS = 0:
                      00207         ;               This bit is ignored. Timer3 uses the internal clock when TMR3CS = 0.
                      00208         ; bit 1 TMR3CS: Timer3 Clock Source Select bit
                      00209         ;       1 = External clock input from Timer1 oscillator or T1CKI
                      00210         ;               (on the rising edge after the first falling edge)
                      00211         ;       0 = Internal clock (FOSC/4)
                      00212         ; bit 0 TMR3ON: Timer3 On bit
                      00213         ;       1 = Enables Timer3
                      00214         ;       0 = Stops Timer3
                      00215 ;       MOVLF   b'10011000', T3CON
                      00216 
                      00217 ;       bsf             PIE2, TMR3IE
                      00218 ;       bsf             IPR2, TMR3IP
                      00219 
                      00220 
                      00221         MOVLF   b'10100000', T1CON
0002F8 0EA0               M                 movlw   b'10100000'
0002FA 6ECD               M                 movwf   T1CON
0002FC 809D           00222         bsf             PIE1, TMR1IE
0002FE 809F           00223         bsf             IPR1, TMR1IP
                      00224 
                      00225 
                      00226         ; ##################
000300 0E01           00227         movlw   .1
000302 6E47           00228         movwf   phase
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 21
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00229 
000304 6A48           00230         clrf    phase_cmpt
                      00231 
000306 6A3C           00232         clrf    cmpt_pass
000308 0E80           00233         movlw   .128
00030A 6E3D           00234         movwf   current_cons
                      00235 
                      00236 ;       movlw   .1
                      00237 ;       movwf   cmpt_word
00030C 6A57           00238         clrf    received_counter
                      00239 
                      00240 ;       movwf   pos_recept
                      00241         
                      00242 
                      00243         ; Liaison série !
                      00244 ;       #define BAUD  .9600
                      00245 ;       #define XTAL  .4000000
                      00246 ;       #define X     ((XTAL * .1000000) / ( .64 * BAUD)) - 1
                      00247 
                      00248         #define         BAUD    .9600
                      00249         #define         XTAL    .40000000
                      00250         #define         X               ((XTAL / BAUD) / 64) - 1
                      00251 
                      00252 ;messg X
                      00253 
                      00254         MOVLF   .64, SPBRG
00030E 0E40               M                 movlw   .64
000310 6EAF               M                 movwf   SPBRG
                      00255 ;       MOVLF   X, SPBRG
                      00256 
000312 98AC           00257         bcf             TXSTA, SYNC
                      00258 
000314 8EAB           00259         bsf             RCSTA, SPEN
000316 9CAB           00260         bcf             RCSTA, RX9
000318 88AB           00261         bsf             RCSTA, CREN
                      00262 
00031A 8A9D           00263         bsf             PIE1, RCIE
00031C 9A9F           00264         bcf             IPR1, RCIP
                      00265 
                      00266         ; Ajout hugo, le 11/01/2006
                      00267         MOVLF   b'00100001', TXSTA
00031E 0E21               M                 movlw   b'00100001'
000320 6EAC               M                 movwf   TXSTA
                      00268 
000322 8A9D           00269         bsf             PIE1, RCIE
000324 989F           00270         bcf             IPR1, TXIP
                      00271         ; Fin ajout hugo
                      00272 
                      00273 ;;;;;;;;;;clrf  ADCON0
                      00274 
                      00275 
                      00276 ;; SEND A CHAR
                      00277 ;;      MOVLF   .51, SPBRG
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 22
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00278 ;       MOVLF   X, SPBRG
                      00279 ;
                      00280 ;       MOVLF   b'00100001', TXSTA
                      00281 ;       MOVLF   b'10110000', RCSTA
                      00282 ;
                      00283 ;       bsf             PIE1, RCIE
                      00284 ;       bcf             IPR1, TXIP
                      00285 ;
                      00286 ;       movlw   b'10101010'
                      00287 ;       movwf   TXREG
                      00288 
                      00289 
                      00290 ;       MOVLW   .25 ; Set Baud Rate
                      00291 ;       MOVWF   SPBRG
                      00292 ;       MOVLW   0xB0 ; Synchronous Master,8-bit transmit,
                      00293 ;       MOVWF   TXSTA ; transmitter enabled, low speed mode
                      00294 ;       BSF             PIE1,TXIE ; Enable transmit interrupts
                      00295 ;       BSF             PIE1,RCIE ; Enable receive interrupts
                      00296 ;
                      00297 ;       MOVLW   0x90 ; 8-bit receive, receiver enabled,
                      00298 ;       MOVWF   RCSTA ; continuous receive, serial port enabled
                      00686         #include "init2.inc"
                      00001 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00002 ; | Gestion de 24 servos avec un PIC18F452                                                              
                                                                                                                            
                      00003 ; | Copyright (C) 2012 Charles RINCHEVAL (contact@digitalspirit.org)                                    
                                                                                                            |
                      00004 ; | Ce programme est libre, vous pouvez le redistribuer et/ou le modifier selon les termes de la Licence
                             Publique Générale GNU  |
                      00005 ; | publiée par la Free Software Foundation (version 2 ou bien toute autre version ultérieure choisie pa
                            r vous).                                |
                      00006 ; | Ce programme est distribué car potentiellement utile, mais SANS AUCUNE GARANTIE, ni explicite ni imp
                            licite,                                 |
                      00007 ; | y compris les garanties de commercialisation ou d'adaptation dans un but spécifique.                
                                                                                            |
                      00008 ; | Reportez-vous à la Licence Publique Générale GNU pour plus de détails.                              
                                                                                                            |
                      00009 ; | Vous devez avoir reçu une copie de la Licence Publique Générale GNU en même temps que ce programme ;
                                                                            |
                      00010 ; | si ce n'est pas le cas,                                                                             
                                                                                                                            
                      00011 ; | écrivez à la Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, État
                            s-Unis.                                 |
                      00012 ; +-----------------------------------------------------------------------------------------------------
                            ------------------------+
                      00013 
                      00014 #DEFINE CONS_ALL_0
                      00015 ;#DEFINE        CONS_ALL_1
                      00016 ;#DEFINE        CONS_ALL_254
                      00017 ;#DEFINE        CONS_DEC
                      00018 ;#DEFINE        CONS_INC
                      00019 
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 23
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00020 #IFDEF  CONS_ALL_0
                      00021         MOVLF   .0, servo_cons0         ; 00
000326 0E00               M                 movlw   .0
000328 6E00               M                 movwf   servo_cons0
                      00022         MOVLF   .0, servo_cons1         ; 01
00032A 0E00               M                 movlw   .0
00032C 6E01               M                 movwf   servo_cons1
                      00023         MOVLF   .0, servo_cons2         ; 02
00032E 0E00               M                 movlw   .0
000330 6E02               M                 movwf   servo_cons2
                      00024         MOVLF   .0, servo_cons3         ; 03
000332 0E00               M                 movlw   .0
000334 6E03               M                 movwf   servo_cons3
                      00025         MOVLF   .0, servo_cons4         ; 04
000336 0E00               M                 movlw   .0
000338 6E04               M                 movwf   servo_cons4
                      00026         MOVLF   .0, servo_cons5         ; 05
00033A 0E00               M                 movlw   .0
00033C 6E05               M                 movwf   servo_cons5
                      00027         MOVLF   .0, servo_cons6         ; 06
00033E 0E00               M                 movlw   .0
000340 6E06               M                 movwf   servo_cons6
                      00028         MOVLF   .0, servo_cons7         ; 07
000342 0E00               M                 movlw   .0
000344 6E07               M                 movwf   servo_cons7
                      00029         MOVLF   .0, servo_cons8         ; 08
000346 0E00               M                 movlw   .0
000348 6E08               M                 movwf   servo_cons8
                      00030         MOVLF   .0, servo_cons9         ; 09
00034A 0E00               M                 movlw   .0
00034C 6E09               M                 movwf   servo_cons9
                      00031         MOVLF   .0, servo_cons10        ; 0A
00034E 0E00               M                 movlw   .0
000350 6E0A               M                 movwf   servo_cons10
                      00032         MOVLF   .0, servo_cons11        ; 0B
000352 0E00               M                 movlw   .0
000354 6E0B               M                 movwf   servo_cons11
                      00033         MOVLF   .0, servo_cons12        ; 0C
000356 0E00               M                 movlw   .0
000358 6E0C               M                 movwf   servo_cons12
                      00034         MOVLF   .0, servo_cons13        ; 0D
00035A 0E00               M                 movlw   .0
00035C 6E0D               M                 movwf   servo_cons13
                      00035         MOVLF   .0, servo_cons14        ; 0E
00035E 0E00               M                 movlw   .0
000360 6E0E               M                 movwf   servo_cons14
                      00036         MOVLF   .0, servo_cons15        ; 0F
000362 0E00               M                 movlw   .0
000364 6E0F               M                 movwf   servo_cons15
                      00037         MOVLF   .0, servo_cons16        ; 10
000366 0E00               M                 movlw   .0
000368 6E10               M                 movwf   servo_cons16
                      00038         MOVLF   .0, servo_cons17        ; 12
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 24
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00036A 0E00               M                 movlw   .0
00036C 6E11               M                 movwf   servo_cons17
                      00039         MOVLF   .0, servo_cons18        ; 13
00036E 0E00               M                 movlw   .0
000370 6E12               M                 movwf   servo_cons18
                      00040         MOVLF   .0, servo_cons19        ; 14
000372 0E00               M                 movlw   .0
000374 6E13               M                 movwf   servo_cons19
                      00041         MOVLF   .0, servo_cons20        ; 15
000376 0E00               M                 movlw   .0
000378 6E14               M                 movwf   servo_cons20
                      00042         MOVLF   .0, servo_cons21        ; 16
00037A 0E00               M                 movlw   .0
00037C 6E15               M                 movwf   servo_cons21
                      00043         MOVLF   .0, servo_cons22        ; 17
00037E 0E00               M                 movlw   .0
000380 6E16               M                 movwf   servo_cons22
                      00044         MOVLF   .0, servo_cons23        ; 18
000382 0E00               M                 movlw   .0
000384 6E17               M                 movwf   servo_cons23
                      00045 #ENDIF
                      00046 
                      00047 #IFDEF  CONS_ALL_1
                      00048         MOVLF   .1, servo_cons0         ; 00
                      00049         MOVLF   .1, servo_cons1         ; 01
                      00050         MOVLF   .1, servo_cons2         ; 02
                      00051         MOVLF   .1, servo_cons3         ; 03
                      00052         MOVLF   .1, servo_cons4         ; 04
                      00053         MOVLF   .1, servo_cons5         ; 05
                      00054         MOVLF   .1, servo_cons6         ; 06
                      00055         MOVLF   .1, servo_cons7         ; 07
                      00056         MOVLF   .1, servo_cons8         ; 08
                      00057         MOVLF   .1, servo_cons9         ; 09
                      00058         MOVLF   .1, servo_cons10        ; 0A
                      00059         MOVLF   .1, servo_cons11        ; 0B
                      00060         MOVLF   .1, servo_cons12        ; 0C
                      00061         MOVLF   .1, servo_cons13        ; 0D
                      00062         MOVLF   .1, servo_cons14        ; 0E
                      00063         MOVLF   .1, servo_cons15        ; 0F
                      00064         MOVLF   .1, servo_cons16        ; 10
                      00065         MOVLF   .1, servo_cons17        ; 12
                      00066         MOVLF   .1, servo_cons18        ; 13
                      00067         MOVLF   .1, servo_cons19        ; 14
                      00068         MOVLF   .1, servo_cons20        ; 15
                      00069         MOVLF   .1, servo_cons21        ; 16
                      00070         MOVLF   .1, servo_cons22        ; 17
                      00071         MOVLF   .1, servo_cons23        ; 18
                      00072 #ENDIF
                      00073 
                      00074 #IFDEF  CONS_ALL_254
                      00075         MOVLF   .254, servo_cons0               ; 00
                      00076         MOVLF   .254, servo_cons1               ; 01
                      00077         MOVLF   .254, servo_cons2               ; 02
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 25
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00078         MOVLF   .254, servo_cons3               ; 03
                      00079         MOVLF   .254, servo_cons4               ; 04
                      00080         MOVLF   .254, servo_cons5               ; 05
                      00081         MOVLF   .254, servo_cons6               ; 06
                      00082         MOVLF   .254, servo_cons7               ; 07
                      00083         MOVLF   .254, servo_cons8               ; 08
                      00084         MOVLF   .254, servo_cons9               ; 09
                      00085         MOVLF   .254, servo_cons10      ; 0A
                      00086         MOVLF   .254, servo_cons11      ; 0B
                      00087         MOVLF   .254, servo_cons12      ; 0C
                      00088         MOVLF   .254, servo_cons13      ; 0D
                      00089         MOVLF   .254, servo_cons14      ; 0E
                      00090         MOVLF   .254, servo_cons15      ; 0F
                      00091         MOVLF   .254, servo_cons16      ; 10
                      00092         MOVLF   .254, servo_cons17      ; 12
                      00093         MOVLF   .254, servo_cons18      ; 13
                      00094         MOVLF   .254, servo_cons19      ; 14
                      00095         MOVLF   .254, servo_cons20      ; 15
                      00096         MOVLF   .254, servo_cons21      ; 16
                      00097         MOVLF   .254, servo_cons22      ; 17
                      00098         MOVLF   .254, servo_cons23      ; 18
                      00099 #ENDIF
                      00100 
                      00101 #IFDEF  CONS_DEC
                      00102         MOVLF   .255, servo_cons0               ; 00
                      00103         MOVLF   .220, servo_cons1               ; 01
                      00104         MOVLF   .210, servo_cons2               ; 02
                      00105         MOVLF   .200, servo_cons3               ; 03
                      00106         MOVLF   .190, servo_cons4               ; 04
                      00107         MOVLF   .180, servo_cons5               ; 05
                      00108         MOVLF   .170, servo_cons6               ; 06
                      00109         MOVLF   .160, servo_cons7               ; 07
                      00110         MOVLF   .150, servo_cons8               ; 08
                      00111         MOVLF   .140, servo_cons9               ; 09
                      00112         MOVLF   .130, servo_cons10      ; 0A
                      00113         MOVLF   .120, servo_cons11      ; 0B
                      00114         MOVLF   .110, servo_cons12      ; 0C
                      00115         MOVLF   .100, servo_cons13      ; 0D
                      00116         MOVLF   .90, servo_cons14       ; 0E
                      00117         MOVLF   .80, servo_cons15       ; 0F
                      00118         MOVLF   .70, servo_cons16       ; 10
                      00119         MOVLF   .60, servo_cons17       ; 12
                      00120         MOVLF   .50, servo_cons18       ; 13
                      00121         MOVLF   .40, servo_cons19       ; 14
                      00122         MOVLF   .30, servo_cons20       ; 15
                      00123         MOVLF   .20, servo_cons21       ; 16
                      00124         MOVLF   .10, servo_cons22       ; 17
                      00125         MOVLF   .1, servo_cons23        ; 18
                      00126 #ENDIF
                      00127 
                      00128 
                      00129 #IFDEF  CONS_INC
                      00130         MOVLF   .1, servo_cons0         ; 00
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 26
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00131         MOVLF   .2, servo_cons1         ; 01
                      00132         MOVLF   .3, servo_cons2         ; 02
                      00133         MOVLF   .4, servo_cons3         ; 03
                      00134         MOVLF   .5, servo_cons4         ; 04
                      00135         MOVLF   .6, servo_cons5         ; 05
                      00136         MOVLF   .7, servo_cons6         ; 06
                      00137         MOVLF   .8, servo_cons7         ; 07
                      00138         MOVLF   .9, servo_cons8         ; 08
                      00139         MOVLF   .10, servo_cons9        ; 09
                      00140         MOVLF   .11, servo_cons10       ; 0A
                      00141         MOVLF   .12, servo_cons11       ; 0B
                      00142         MOVLF   .13, servo_cons12       ; 0C
                      00143         MOVLF   .14, servo_cons13       ; 0D
                      00144         MOVLF   .15, servo_cons14       ; 0E
                      00145         MOVLF   .16, servo_cons15       ; 0F
                      00146         MOVLF   .17, servo_cons16       ; 10
                      00147         MOVLF   .18, servo_cons17       ; 12
                      00148         MOVLF   .19, servo_cons18       ; 13
                      00149         MOVLF   .20, servo_cons19       ; 14
                      00150         MOVLF   .128, servo_cons20      ; 15
                      00151         MOVLF   .129, servo_cons21      ; 16
                      00152         MOVLF   .253, servo_cons22      ; 17
                      00153         MOVLF   .254, servo_cons23      ; 18
                      00154 #ENDIF
                      00155 
                      00156 
000386 0101           00157         movlb   .1
                      00158 
                      00159 #IFDEF  CONS_INC
                      00160 
                      00161         MOVLFB  .1, servo_nbr00
                      00162         MOVLFB  .1, servo_nbr01
                      00163         MOVLFB  .1, servo_nbr02
                      00164         MOVLFB  .1, servo_nbr03
                      00165         MOVLFB  .1, servo_nbr04
                      00166         MOVLFB  .1, servo_nbr05
                      00167         MOVLFB  .1, servo_nbr06
                      00168         MOVLFB  .1, servo_nbr07
                      00169         MOVLFB  .1, servo_nbr08
                      00170         MOVLFB  .1, servo_nbr09
                      00171         MOVLFB  .1, servo_nbr10
                      00172         MOVLFB  .1, servo_nbr11
                      00173         MOVLFB  .1, servo_nbr12
                      00174         MOVLFB  .1, servo_nbr13
                      00175         MOVLFB  .1, servo_nbr14
                      00176         MOVLFB  .1, servo_nbr15
                      00177         MOVLFB  .1, servo_nbr16
                      00178         MOVLFB  .1, servo_nbr17
                      00179         MOVLFB  .1, servo_nbr18
                      00180         MOVLFB  .1, servo_nbr19
                      00181         MOVLFB  .1, servo_nbr20
                      00182         MOVLFB  .1, servo_nbr21
                      00183         MOVLFB  .1, servo_nbr22
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 27
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00184         MOVLFB  .1, servo_nbr23
                      00185 
                      00186         MOVLFB  b'00000001', servo_val00
                      00187         MOVLFB  b'00000000', servo_val01                ; 0
                      00188         MOVLFB  b'00000000', servo_val02
                      00189 
                      00190         MOVLFB  b'00000010', servo_val03
                      00191         MOVLFB  b'00000000', servo_val04                ; 1
                      00192         MOVLFB  b'00000000', servo_val05
                      00193 
                      00194         MOVLFB  b'00000100', servo_val06
                      00195         MOVLFB  b'00000000', servo_val07                ; 2
                      00196         MOVLFB  b'00000000', servo_val08
                      00197 
                      00198         MOVLFB  b'00001000', servo_val09
                      00199         MOVLFB  b'00000000', servo_val10                ; 3
                      00200         MOVLFB  b'00000000', servo_val11
                      00201 
                      00202         MOVLFB  b'00010000', servo_val12
                      00203         MOVLFB  b'00000000', servo_val13                ; 4
                      00204         MOVLFB  b'00000000', servo_val14
                      00205 
                      00206         MOVLFB  b'00100000', servo_val15
                      00207         MOVLFB  b'00000000', servo_val16                ; 5
                      00208         MOVLFB  b'00000000', servo_val17
                      00209 
                      00210         MOVLFB  b'01000000', servo_val18
                      00211         MOVLFB  b'00000000', servo_val19                ; 6
                      00212         MOVLFB  b'00000000', servo_val20
                      00213 
                      00214         MOVLFB  b'10000000', servo_val21
                      00215         MOVLFB  b'00000000', servo_val22                ; 7
                      00216         MOVLFB  b'00000000', servo_val23
                      00217 
                      00218         MOVLFB  b'00000000', servo_val24
                      00219         MOVLFB  b'00000001', servo_val25                ; 8
                      00220         MOVLFB  b'00000000', servo_val26
                      00221 
                      00222         MOVLFB  b'00000000', servo_val27
                      00223         MOVLFB  b'00000010', servo_val28                ; 9
                      00224         MOVLFB  b'00000000', servo_val29
                      00225 
                      00226         MOVLFB  b'00000000', servo_val30
                      00227         MOVLFB  b'00000100', servo_val31                ; 10
                      00228         MOVLFB  b'00000000', servo_val32
                      00229 
                      00230         MOVLFB  b'00000000', servo_val33
                      00231         MOVLFB  b'00001000', servo_val34                ; 11
                      00232         MOVLFB  b'00000000', servo_val35
                      00233 
                      00234         MOVLFB  b'00000000', servo_val36
                      00235         MOVLFB  b'00010000', servo_val37                ; 12
                      00236         MOVLFB  b'00000000', servo_val38
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 28
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00237 
                      00238         MOVLFB  b'00000000', servo_val39
                      00239         MOVLFB  b'00100000', servo_val40                ; 13
                      00240         MOVLFB  b'00000000', servo_val41
                      00241 
                      00242         MOVLFB  b'00000000', servo_val42
                      00243         MOVLFB  b'01000000', servo_val43                ; 14
                      00244         MOVLFB  b'00000000', servo_val44
                      00245 
                      00246         MOVLFB  b'00000000', servo_val45
                      00247         MOVLFB  b'10000000', servo_val46                ; 15
                      00248         MOVLFB  b'00000000', servo_val47
                      00249 
                      00250         MOVLFB  b'00000000', servo_val48
                      00251         MOVLFB  b'00000000', servo_val49                ; 16
                      00252         MOVLFB  b'00000001', servo_val50
                      00253 
                      00254         MOVLFB  b'00000000', servo_val51
                      00255         MOVLFB  b'00000000', servo_val52                ; 17
                      00256         MOVLFB  b'00000010', servo_val53
                      00257 
                      00258         MOVLFB  b'00000000', servo_val54
                      00259         MOVLFB  b'00000000', servo_val55                ; 18
                      00260         MOVLFB  b'00000100', servo_val56
                      00261 
                      00262         MOVLFB  b'00000000', servo_val57
                      00263         MOVLFB  b'00000000', servo_val58                ; 19
                      00264         MOVLFB  b'00001000', servo_val59
                      00265 
                      00266         MOVLFB  b'00000000', servo_val60
                      00267         MOVLFB  b'00000000', servo_val61                ; 20
                      00268         MOVLFB  b'00010000', servo_val62
                      00269 
                      00270         MOVLFB  b'00000000', servo_val63
                      00271         MOVLFB  b'00000000', servo_val64                ; 21
                      00272         MOVLFB  b'00100000', servo_val65
                      00273 
                      00274         MOVLFB  b'00000000', servo_val66
                      00275         MOVLFB  b'00000000', servo_val67                ; 22
                      00276         MOVLFB  b'01000000', servo_val68
                      00277 
                      00278         MOVLFB  b'00000000', servo_val69
                      00279         MOVLFB  b'00000000', servo_val70                ; 23
                      00280         MOVLFB  b'10000000', servo_val71
                      00281 
                      00282 #ENDIF
                      00283 
                      00284 #IFDEF  CONS_ALL_0
                      00285 
                      00286         MOVLFB  .23, servo_nbr00
000388 0E17               M                 movlw   .23
00038A 6F00               M                 movwf   servo_nbr00, BANKED
                      00287         MOVLFB  .0, servo_nbr01
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 29
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00038C 0E00               M                 movlw   .0
00038E 6F01               M                 movwf   servo_nbr01, BANKED
                      00288         MOVLFB  .0, servo_nbr02
000390 0E00               M                 movlw   .0
000392 6F02               M                 movwf   servo_nbr02, BANKED
                      00289         MOVLFB  .0, servo_nbr03
000394 0E00               M                 movlw   .0
000396 6F03               M                 movwf   servo_nbr03, BANKED
                      00290         MOVLFB  .0, servo_nbr04
000398 0E00               M                 movlw   .0
00039A 6F04               M                 movwf   servo_nbr04, BANKED
                      00291         MOVLFB  .0, servo_nbr05
00039C 0E00               M                 movlw   .0
00039E 6F05               M                 movwf   servo_nbr05, BANKED
                      00292         MOVLFB  .0, servo_nbr06
0003A0 0E00               M                 movlw   .0
0003A2 6F06               M                 movwf   servo_nbr06, BANKED
                      00293         MOVLFB  .0, servo_nbr07
0003A4 0E00               M                 movlw   .0
0003A6 6F07               M                 movwf   servo_nbr07, BANKED
                      00294         MOVLFB  .0, servo_nbr08
0003A8 0E00               M                 movlw   .0
0003AA 6F08               M                 movwf   servo_nbr08, BANKED
                      00295         MOVLFB  .0, servo_nbr09
0003AC 0E00               M                 movlw   .0
0003AE 6F09               M                 movwf   servo_nbr09, BANKED
                      00296         MOVLFB  .0, servo_nbr10
0003B0 0E00               M                 movlw   .0
0003B2 6F0A               M                 movwf   servo_nbr10, BANKED
                      00297         MOVLFB  .0, servo_nbr11
0003B4 0E00               M                 movlw   .0
0003B6 6F0B               M                 movwf   servo_nbr11, BANKED
                      00298         MOVLFB  .0, servo_nbr12
0003B8 0E00               M                 movlw   .0
0003BA 6F0C               M                 movwf   servo_nbr12, BANKED
                      00299         MOVLFB  .0, servo_nbr13
0003BC 0E00               M                 movlw   .0
0003BE 6F0D               M                 movwf   servo_nbr13, BANKED
                      00300         MOVLFB  .0, servo_nbr14
0003C0 0E00               M                 movlw   .0
0003C2 6F0E               M                 movwf   servo_nbr14, BANKED
                      00301         MOVLFB  .0, servo_nbr15
0003C4 0E00               M                 movlw   .0
0003C6 6F0F               M                 movwf   servo_nbr15, BANKED
                      00302         MOVLFB  .0, servo_nbr16
0003C8 0E00               M                 movlw   .0
0003CA 6F10               M                 movwf   servo_nbr16, BANKED
                      00303         MOVLFB  .0, servo_nbr17
0003CC 0E00               M                 movlw   .0
0003CE 6F11               M                 movwf   servo_nbr17, BANKED
                      00304         MOVLFB  .0, servo_nbr18
0003D0 0E00               M                 movlw   .0
0003D2 6F12               M                 movwf   servo_nbr18, BANKED
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 30
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00305         MOVLFB  .0, servo_nbr19
0003D4 0E00               M                 movlw   .0
0003D6 6F13               M                 movwf   servo_nbr19, BANKED
                      00306         MOVLFB  .0, servo_nbr20
0003D8 0E00               M                 movlw   .0
0003DA 6F14               M                 movwf   servo_nbr20, BANKED
                      00307         MOVLFB  .0, servo_nbr21
0003DC 0E00               M                 movlw   .0
0003DE 6F15               M                 movwf   servo_nbr21, BANKED
                      00308         MOVLFB  .0, servo_nbr22
0003E0 0E00               M                 movlw   .0
0003E2 6F16               M                 movwf   servo_nbr22, BANKED
                      00309         MOVLFB  .0, servo_nbr23
0003E4 0E00               M                 movlw   .0
0003E6 6F17               M                 movwf   servo_nbr23, BANKED
                      00310 
                      00311         MOVLFB  b'11111111', servo_val00
0003E8 0EFF               M                 movlw   b'11111111'
0003EA 6F18               M                 movwf   servo_val00, BANKED
                      00312         MOVLFB  b'11111111', servo_val01                ; 0
0003EC 0EFF               M                 movlw   b'11111111'
0003EE 6F19               M                 movwf   servo_val01, BANKED
                      00313         MOVLFB  b'11111111', servo_val02
0003F0 0EFF               M                 movlw   b'11111111'
0003F2 6F1A               M                 movwf   servo_val02, BANKED
                      00314 
                      00315         MOVLFB  b'00000000', servo_val03
0003F4 0E00               M                 movlw   b'00000000'
0003F6 6F1B               M                 movwf   servo_val03, BANKED
                      00316         MOVLFB  b'00000000', servo_val04                ; 1
0003F8 0E00               M                 movlw   b'00000000'
0003FA 6F1C               M                 movwf   servo_val04, BANKED
                      00317         MOVLFB  b'00000000', servo_val05
0003FC 0E00               M                 movlw   b'00000000'
0003FE 6F1D               M                 movwf   servo_val05, BANKED
                      00318 
                      00319         MOVLFB  b'00000000', servo_val06
000400 0E00               M                 movlw   b'00000000'
000402 6F1E               M                 movwf   servo_val06, BANKED
                      00320         MOVLFB  b'00000000', servo_val07                ; 2
000404 0E00               M                 movlw   b'00000000'
000406 6F1F               M                 movwf   servo_val07, BANKED
                      00321         MOVLFB  b'00000000', servo_val08
000408 0E00               M                 movlw   b'00000000'
00040A 6F20               M                 movwf   servo_val08, BANKED
                      00322 
                      00323         MOVLFB  b'00000000', servo_val09
00040C 0E00               M                 movlw   b'00000000'
00040E 6F21               M                 movwf   servo_val09, BANKED
                      00324         MOVLFB  b'00000000', servo_val10                ; 3
000410 0E00               M                 movlw   b'00000000'
000412 6F22               M                 movwf   servo_val10, BANKED
                      00325         MOVLFB  b'00000000', servo_val11
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 31
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000414 0E00               M                 movlw   b'00000000'
000416 6F23               M                 movwf   servo_val11, BANKED
                      00326 
                      00327         MOVLFB  b'00000000', servo_val12
000418 0E00               M                 movlw   b'00000000'
00041A 6F24               M                 movwf   servo_val12, BANKED
                      00328         MOVLFB  b'00000000', servo_val13                ; 4
00041C 0E00               M                 movlw   b'00000000'
00041E 6F25               M                 movwf   servo_val13, BANKED
                      00329         MOVLFB  b'00000000', servo_val14
000420 0E00               M                 movlw   b'00000000'
000422 6F26               M                 movwf   servo_val14, BANKED
                      00330 
                      00331         MOVLFB  b'00000000', servo_val15
000424 0E00               M                 movlw   b'00000000'
000426 6F27               M                 movwf   servo_val15, BANKED
                      00332         MOVLFB  b'00000000', servo_val16                ; 5
000428 0E00               M                 movlw   b'00000000'
00042A 6F28               M                 movwf   servo_val16, BANKED
                      00333         MOVLFB  b'00000000', servo_val17
00042C 0E00               M                 movlw   b'00000000'
00042E 6F29               M                 movwf   servo_val17, BANKED
                      00334 
                      00335         MOVLFB  b'00000000', servo_val18
000430 0E00               M                 movlw   b'00000000'
000432 6F2A               M                 movwf   servo_val18, BANKED
                      00336         MOVLFB  b'00000000', servo_val19                ; 6
000434 0E00               M                 movlw   b'00000000'
000436 6F2B               M                 movwf   servo_val19, BANKED
                      00337         MOVLFB  b'00000000', servo_val20
000438 0E00               M                 movlw   b'00000000'
00043A 6F2C               M                 movwf   servo_val20, BANKED
                      00338 
                      00339         MOVLFB  b'00000000', servo_val21
00043C 0E00               M                 movlw   b'00000000'
00043E 6F2D               M                 movwf   servo_val21, BANKED
                      00340         MOVLFB  b'00000000', servo_val22                ; 7
000440 0E00               M                 movlw   b'00000000'
000442 6F2E               M                 movwf   servo_val22, BANKED
                      00341         MOVLFB  b'00000000', servo_val23
000444 0E00               M                 movlw   b'00000000'
000446 6F2F               M                 movwf   servo_val23, BANKED
                      00342 
                      00343         MOVLFB  b'00000000', servo_val24
000448 0E00               M                 movlw   b'00000000'
00044A 6F30               M                 movwf   servo_val24, BANKED
                      00344         MOVLFB  b'00000000', servo_val25                ; 8
00044C 0E00               M                 movlw   b'00000000'
00044E 6F31               M                 movwf   servo_val25, BANKED
                      00345         MOVLFB  b'00000000', servo_val26
000450 0E00               M                 movlw   b'00000000'
000452 6F32               M                 movwf   servo_val26, BANKED
                      00346 
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 32
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00347         MOVLFB  b'00000000', servo_val27
000454 0E00               M                 movlw   b'00000000'
000456 6F33               M                 movwf   servo_val27, BANKED
                      00348         MOVLFB  b'00000000', servo_val28                ; 9
000458 0E00               M                 movlw   b'00000000'
00045A 6F34               M                 movwf   servo_val28, BANKED
                      00349         MOVLFB  b'00000000', servo_val29
00045C 0E00               M                 movlw   b'00000000'
00045E 6F35               M                 movwf   servo_val29, BANKED
                      00350 
                      00351         MOVLFB  b'00000000', servo_val30
000460 0E00               M                 movlw   b'00000000'
000462 6F36               M                 movwf   servo_val30, BANKED
                      00352         MOVLFB  b'00000000', servo_val31                ; 10
000464 0E00               M                 movlw   b'00000000'
000466 6F37               M                 movwf   servo_val31, BANKED
                      00353         MOVLFB  b'00000000', servo_val32
000468 0E00               M                 movlw   b'00000000'
00046A 6F38               M                 movwf   servo_val32, BANKED
                      00354 
                      00355         MOVLFB  b'00000000', servo_val33
00046C 0E00               M                 movlw   b'00000000'
00046E 6F39               M                 movwf   servo_val33, BANKED
                      00356         MOVLFB  b'00000000', servo_val34                ; 11
000470 0E00               M                 movlw   b'00000000'
000472 6F3A               M                 movwf   servo_val34, BANKED
                      00357         MOVLFB  b'00000000', servo_val35
000474 0E00               M                 movlw   b'00000000'
000476 6F3B               M                 movwf   servo_val35, BANKED
                      00358 
                      00359         MOVLFB  b'00000000', servo_val36
000478 0E00               M                 movlw   b'00000000'
00047A 6F3C               M                 movwf   servo_val36, BANKED
                      00360         MOVLFB  b'00000000', servo_val37                ; 12
00047C 0E00               M                 movlw   b'00000000'
00047E 6F3D               M                 movwf   servo_val37, BANKED
                      00361         MOVLFB  b'00000000', servo_val38
000480 0E00               M                 movlw   b'00000000'
000482 6F3E               M                 movwf   servo_val38, BANKED
                      00362 
                      00363         MOVLFB  b'00000000', servo_val39
000484 0E00               M                 movlw   b'00000000'
000486 6F3F               M                 movwf   servo_val39, BANKED
                      00364         MOVLFB  b'00000000', servo_val40                ; 13
000488 0E00               M                 movlw   b'00000000'
00048A 6F40               M                 movwf   servo_val40, BANKED
                      00365         MOVLFB  b'00000000', servo_val41
00048C 0E00               M                 movlw   b'00000000'
00048E 6F41               M                 movwf   servo_val41, BANKED
                      00366 
                      00367         MOVLFB  b'00000000', servo_val42
000490 0E00               M                 movlw   b'00000000'
000492 6F42               M                 movwf   servo_val42, BANKED
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 33
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00368         MOVLFB  b'00000000', servo_val43                ; 14
000494 0E00               M                 movlw   b'00000000'
000496 6F43               M                 movwf   servo_val43, BANKED
                      00369         MOVLFB  b'00000000', servo_val44
000498 0E00               M                 movlw   b'00000000'
00049A 6F44               M                 movwf   servo_val44, BANKED
                      00370 
                      00371         MOVLFB  b'00000000', servo_val45
00049C 0E00               M                 movlw   b'00000000'
00049E 6F45               M                 movwf   servo_val45, BANKED
                      00372         MOVLFB  b'00000000', servo_val46                ; 15
0004A0 0E00               M                 movlw   b'00000000'
0004A2 6F46               M                 movwf   servo_val46, BANKED
                      00373         MOVLFB  b'00000000', servo_val47
0004A4 0E00               M                 movlw   b'00000000'
0004A6 6F47               M                 movwf   servo_val47, BANKED
                      00374 
                      00375         MOVLFB  b'00000000', servo_val48
0004A8 0E00               M                 movlw   b'00000000'
0004AA 6F48               M                 movwf   servo_val48, BANKED
                      00376         MOVLFB  b'00000000', servo_val49                ; 16
0004AC 0E00               M                 movlw   b'00000000'
0004AE 6F49               M                 movwf   servo_val49, BANKED
                      00377         MOVLFB  b'00000000', servo_val50
0004B0 0E00               M                 movlw   b'00000000'
0004B2 6F4A               M                 movwf   servo_val50, BANKED
                      00378 
                      00379         MOVLFB  b'00000000', servo_val51
0004B4 0E00               M                 movlw   b'00000000'
0004B6 6F4B               M                 movwf   servo_val51, BANKED
                      00380         MOVLFB  b'00000000', servo_val52                ; 17
0004B8 0E00               M                 movlw   b'00000000'
0004BA 6F4C               M                 movwf   servo_val52, BANKED
                      00381         MOVLFB  b'00000000', servo_val53
0004BC 0E00               M                 movlw   b'00000000'
0004BE 6F4D               M                 movwf   servo_val53, BANKED
                      00382 
                      00383         MOVLFB  b'00000000', servo_val54
0004C0 0E00               M                 movlw   b'00000000'
0004C2 6F4E               M                 movwf   servo_val54, BANKED
                      00384         MOVLFB  b'00000000', servo_val55                ; 18
0004C4 0E00               M                 movlw   b'00000000'
0004C6 6F4F               M                 movwf   servo_val55, BANKED
                      00385         MOVLFB  b'00000000', servo_val56
0004C8 0E00               M                 movlw   b'00000000'
0004CA 6F50               M                 movwf   servo_val56, BANKED
                      00386 
                      00387         MOVLFB  b'00000000', servo_val57
0004CC 0E00               M                 movlw   b'00000000'
0004CE 6F51               M                 movwf   servo_val57, BANKED
                      00388         MOVLFB  b'00000000', servo_val58                ; 19
0004D0 0E00               M                 movlw   b'00000000'
0004D2 6F52               M                 movwf   servo_val58, BANKED
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 34
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00389         MOVLFB  b'00000000', servo_val59
0004D4 0E00               M                 movlw   b'00000000'
0004D6 6F53               M                 movwf   servo_val59, BANKED
                      00390 
                      00391         MOVLFB  b'00000000', servo_val60
0004D8 0E00               M                 movlw   b'00000000'
0004DA 6F54               M                 movwf   servo_val60, BANKED
                      00392         MOVLFB  b'00000000', servo_val61                ; 20
0004DC 0E00               M                 movlw   b'00000000'
0004DE 6F55               M                 movwf   servo_val61, BANKED
                      00393         MOVLFB  b'00000000', servo_val62
0004E0 0E00               M                 movlw   b'00000000'
0004E2 6F56               M                 movwf   servo_val62, BANKED
                      00394 
                      00395         MOVLFB  b'00000000', servo_val63
0004E4 0E00               M                 movlw   b'00000000'
0004E6 6F57               M                 movwf   servo_val63, BANKED
                      00396         MOVLFB  b'00000000', servo_val64                ; 21
0004E8 0E00               M                 movlw   b'00000000'
0004EA 6F58               M                 movwf   servo_val64, BANKED
                      00397         MOVLFB  b'00000000', servo_val65
0004EC 0E00               M                 movlw   b'00000000'
0004EE 6F59               M                 movwf   servo_val65, BANKED
                      00398 
                      00399         MOVLFB  b'00000000', servo_val66
0004F0 0E00               M                 movlw   b'00000000'
0004F2 6F5A               M                 movwf   servo_val66, BANKED
                      00400         MOVLFB  b'00000000', servo_val67                ; 22
0004F4 0E00               M                 movlw   b'00000000'
0004F6 6F5B               M                 movwf   servo_val67, BANKED
                      00401         MOVLFB  b'00000000', servo_val68
0004F8 0E00               M                 movlw   b'00000000'
0004FA 6F5C               M                 movwf   servo_val68, BANKED
                      00402 
                      00403         MOVLFB  b'00000000', servo_val69
0004FC 0E00               M                 movlw   b'00000000'
0004FE 6F5D               M                 movwf   servo_val69, BANKED
                      00404         MOVLFB  b'00000000', servo_val70                ; 23
000500 0E00               M                 movlw   b'00000000'
000502 6F5E               M                 movwf   servo_val70, BANKED
                      00405         MOVLFB  b'00000000', servo_val71
000504 0E00               M                 movlw   b'00000000'
000506 6F5F               M                 movwf   servo_val71, BANKED
                      00406 
                      00407 #ENDIF
                      00408 
000508 0100           00409         movlb   .0
                      00687 
                      00688 
                      00689 
                      00690         ;movlw  0
                      00691         ;call   setValue
                      00692 
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 35
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00050A 6A57           00693         clrf    received_counter
00050C 6A67           00694         clrf    pause_mode
                      00695 
                      00696 ; Routine principale
                      00697 
                      00698         ; Activation des interruptions
00050E 8EF2           00699         bsf             INTCON, GIEH
000510 8CF2           00700         bsf             INTCON, GIEL
                      00701         ;goto _intl_usart
                      00702 
000512                00703 main
                      00704         ; On boucle temps que 18 octets ne sont pas recu
000512 0E11           00705         movlw .17
000514 6257           00706         cpfseq received_counter
000516 EF89 F002      00707         goto main
                      00708 
00051A 6A57           00709         clrf received_counter
                      00710 
                      00711         ; Control received bytes
00051C 0E00           00712         movlw 0
00051E 2458           00713         addwf pos_0, 0
000520 2459           00714         addwf pos_1, 0
000522 245A           00715         addwf pos_2, 0
000524 245B           00716         addwf pos_3, 0
000526 245C           00717         addwf pos_4, 0
000528 245D           00718         addwf pos_5, 0
00052A 245E           00719         addwf pos_6, 0
00052C 245F           00720         addwf pos_7, 0
00052E 2460           00721         addwf pos_8, 0
000530 2461           00722         addwf pos_9, 0
000532 2462           00723         addwf pos_10, 0
000534 2463           00724         addwf pos_11, 0
000536 2464           00725         addwf pos_12, 0
000538 2465           00726         addwf pos_13, 0
                      00727 
00053A 6266           00728         cpfseq reception_control
00053C EFC2 F002      00729         goto nack
                      00730 
                      00731 ; Tout est bon, on envoie !
000540                00732 ack
                      00733         ; RA0, RA1, RA2, RA3, RA4, RC0, RC1, RC2        -> Servo 0 à 7
                      00734         ; RB0, RB1, RB2, RB3, RB4, RB5, RE0, RE1        -> Servo 8 à 15 
                      00735         ; RD0, RD1, RD2, RD3, RD4, RD5, RD6, RD7        -> Servo 16 à 23
                      00736 
                      00737         ; Bleuette servo mapping
                      00738         ; pos_0  RA0 -> SRV0 
                      00739         ; pos_1  RA1 -> SRV1
                      00740         ; pos_2  RA2 -> SRV2
                      00741         ; pos_3  RA3 -> SRV3
                      00742         ; pos_4  RA4 -> SRV4
                      00743         ; pos_5  RC0 -> SRV5
                      00744         ; pos_6  RB0 -> SRV6
                      00745         ; pos_7  RB1 -> SRV7
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 36
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00746         ; pos_8  RB2 -> SRV8
                      00747         ; pos_9  RB3 -> SRV9
                      00748         ; pos_10 RB4 -> SRV10
                      00749         ; pos_11 RB5 -> SRV11
                      00750         ; pos_12 RD0 -> SRVX
                      00751         ; pos_13 RD1 -> SRVY
                      00752 
000540 C058 F000      00753         movff pos_0, servo_cons0
000544 C059 F001      00754         movff pos_1, servo_cons1
000548 C05A F002      00755         movff pos_2, servo_cons2
00054C C05B F003      00756         movff pos_3, servo_cons3
000550 C05C F004      00757         movff pos_4, servo_cons4
000554 C05D F005      00758         movff pos_5, servo_cons5
                      00759 
000558 C05E F008      00760         movff pos_6, servo_cons8
00055C C05F F009      00761         movff pos_7, servo_cons9
000560 C060 F00A      00762         movff pos_8, servo_cons10
000564 C061 F00B      00763         movff pos_9, servo_cons11
000568 C062 F00C      00764         movff pos_10, servo_cons12
00056C C063 F00D      00765         movff pos_11, servo_cons13
                      00766 
000570 C064 F010      00767         movff pos_12, servo_cons16
000574 C065 F011      00768         movff pos_13, servo_cons17
                      00769 
                      00770         SEND 'O'
000578 0E4F               M                 movlw   'O'
00057A 6EAD               M                 movwf   TXREG
00057C A89E               M                 btfss   PIR1, TXIF
00057E EFBE F002          M                 goto    $ - 2
000582 D7C7           00771         bra     main
                      00772 
000584                00773 nack
                      00774         SEND 'N'
000584 0E4E               M                 movlw   'N'
000586 6EAD               M                 movwf   TXREG
000588 A89E               M                 btfss   PIR1, TXIF
00058A EFC4 F002          M                 goto    $ - 2
00058E EF89 F002      00775         goto main
                      00776 
                      00777 
                      00778 ; Met toutes les consignes à la valeur voulues (dans WREG)
000592                00779 setValue
                      00780 
000592 6E00           00781         movwf   servo_cons0
000594 6E01           00782         movwf   servo_cons1
000596 6E02           00783         movwf   servo_cons2
000598 6E03           00784         movwf   servo_cons3
00059A 6E04           00785         movwf   servo_cons4
00059C 6E05           00786         movwf   servo_cons5
00059E 6E06           00787         movwf   servo_cons6
0005A0 6E07           00788         movwf   servo_cons7
                      00789 
0005A2 6E08           00790         movwf   servo_cons8
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 37
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0005A4 6E09           00791         movwf   servo_cons9
0005A6 6E0A           00792         movwf   servo_cons10
0005A8 6E0B           00793         movwf   servo_cons11
0005AA 6E0C           00794         movwf   servo_cons12
0005AC 6E0D           00795         movwf   servo_cons13
0005AE 6E0E           00796         movwf   servo_cons14
0005B0 6E0F           00797         movwf   servo_cons15
                      00798 
0005B2 6E10           00799         movwf   servo_cons16
0005B4 6E11           00800         movwf   servo_cons17
0005B6 6E12           00801         movwf   servo_cons18
0005B8 6E13           00802         movwf   servo_cons19
0005BA 6E14           00803         movwf   servo_cons20
0005BC 6E15           00804         movwf   servo_cons21
0005BE 6E16           00805         movwf   servo_cons22
0005C0 6E17           00806         movwf   servo_cons23
                      00807 
0005C2 0012           00808         return
                      00809 
0005C4                00810 clearAllOut
0005C4 0EE0           00811         movlw   b'11100000'
0005C6 1689           00812         andwf   LATA, 1
                      00813 
0005C8 0EF8           00814         movlw   b'11111000'
0005CA 168B           00815         andwf   LATC, 1
                      00816 
0005CC 0EC0           00817         movlw   b'11000000'
0005CE 168A           00818         andwf   LATB, 1
                      00819 
0005D0 0EFC           00820         movlw   b'11111100'
0005D2 168D           00821         andwf   LATE, 1
                      00822 
0005D4 6A8C           00823         clrf    LATD
0005D6 0012           00824         return
                      00825 
                      00826 
                      00827 ; Tous les ports des servos à 1 ...
                      00828 ; ... sauf ceux qui ont une consigne à 0
0005D8                00829 setAllPort
                      00830 ;       movlw   b'00011111'
                      00831 ;       iorwf   LATA
                      00832 ;       movlw   b'00000111'
                      00833 ;       iorwf   LATC
                      00834 ;       movlw   b'00111111'
                      00835 ;       iorwf   LATB
                      00836 ;       movlw   b'00111111'
                      00837 ;       iorwf   LATE
                      00838 ;       setf    LATD
                      00839 ;       return
                      00840 
                      00841 ; On reprend le principe suivant :
                      00842 ; RA0, RA1, RA2, RA3, RA4, RC0, RC1, RC2        -> Servo 0 à 7
                      00843 ; RB0, RB1, RB2, RB3, RB4, RB5, RE0, RE1        -> Servo 8 à 15 
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 38
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00844 ; RD0, RD1, RD2, RD3, RD4, RD5, RD6, RD7        -> Servo 16 à 23
                      00845 ; Inutile de faire une boucle pour gérer le code ci-dessous !
                      00846 
0005D8 6A42           00847         clrf    buf_PORTA
0005DA 6A44           00848         clrf    buf_PORTC
0005DC 6A43           00849         clrf    buf_PORTB
0005DE 6A46           00850         clrf    buf_PORTE
0005E0 6A45           00851         clrf    buf_PORTD
                      00852 
                      00853 
                      00854 
                      00855 ;       movf    servo_cons0, W
                      00856 ;       bz              toto
                      00857 ;       movlw   b'00000001'
                      00858 ;       bra             $ + 6
                      00859 ;toto
                      00860 ;       andwf   b'00000001'
                      00861 ;       iorwf   buf_PORTA
                      00862 
                      00863         
                      00864 
0005E2 6AE8           00865         clrf    WREG
0005E4 6600           00866         tstfsz  servo_cons0
0005E6 0E01           00867         movlw   b'00000001'
0005E8 1242           00868         iorwf   buf_PORTA
                      00869 
0005EA 6AE8           00870         clrf    WREG
0005EC 6601           00871         tstfsz  servo_cons1
0005EE 0E02           00872         movlw   b'00000010'
0005F0 1242           00873         iorwf   buf_PORTA
                      00874 
0005F2 6AE8           00875         clrf    WREG
0005F4 6602           00876         tstfsz  servo_cons2
0005F6 0E04           00877         movlw   b'00000100'
0005F8 1242           00878         iorwf   buf_PORTA
                      00879 
0005FA 6AE8           00880         clrf    WREG
0005FC 6603           00881         tstfsz  servo_cons3
0005FE 0E08           00882         movlw   b'00001000'
000600 1242           00883         iorwf   buf_PORTA
                      00884 
000602 6AE8           00885         clrf    WREG
000604 6604           00886         tstfsz  servo_cons4
000606 0E10           00887         movlw   b'00010000'
000608 1242           00888         iorwf   buf_PORTA
                      00889 
00060A 6AE8           00890         clrf    WREG
00060C 6605           00891         tstfsz  servo_cons5
00060E 0E01           00892         movlw   b'00000001'
000610 1244           00893         iorwf   buf_PORTC
                      00894 
000612 6AE8           00895         clrf    WREG
000614 6606           00896         tstfsz  servo_cons6
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 39
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000616 0E02           00897         movlw   b'00000010'
000618 1244           00898         iorwf   buf_PORTC
                      00899 
00061A 6AE8           00900         clrf    WREG
00061C 6607           00901         tstfsz  servo_cons7
00061E 0E04           00902         movlw   b'00000100'
000620 1244           00903         iorwf   buf_PORTC
                      00904 
                      00905 
                      00906 
000622 6AE8           00907         clrf    WREG
000624 6608           00908         tstfsz  servo_cons8
000626 0E01           00909         movlw   b'00000001'
000628 1243           00910         iorwf   buf_PORTB
                      00911 
00062A 6AE8           00912         clrf    WREG
00062C 6609           00913         tstfsz  servo_cons9
00062E 0E02           00914         movlw   b'00000010'
000630 1243           00915         iorwf   buf_PORTB
                      00916 
000632 6AE8           00917         clrf    WREG
000634 660A           00918         tstfsz  servo_cons10
000636 0E04           00919         movlw   b'00000100'
000638 1243           00920         iorwf   buf_PORTB
                      00921 
00063A 6AE8           00922         clrf    WREG
00063C 660B           00923         tstfsz  servo_cons11
00063E 0E08           00924         movlw   b'00001000'
000640 1243           00925         iorwf   buf_PORTB
                      00926 
000642 6AE8           00927         clrf    WREG
000644 660C           00928         tstfsz  servo_cons12
000646 0E10           00929         movlw   b'00010000'
000648 1243           00930         iorwf   buf_PORTB
                      00931 
00064A 6AE8           00932         clrf    WREG
00064C 660D           00933         tstfsz  servo_cons13
00064E 0E20           00934         movlw   b'00100000'
000650 1243           00935         iorwf   buf_PORTB
                      00936 
000652 6AE8           00937         clrf    WREG
000654 660E           00938         tstfsz  servo_cons14
000656 0E01           00939         movlw   b'00000001'
000658 1246           00940         iorwf   buf_PORTE
                      00941 
00065A 6AE8           00942         clrf    WREG
00065C 660F           00943         tstfsz  servo_cons15
00065E 0E02           00944         movlw   b'00000010'
000660 1246           00945         iorwf   buf_PORTE
                      00946 
                      00947 
                      00948 
000662 6AE8           00949         clrf    WREG
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 40
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000664 6610           00950         tstfsz  servo_cons16
000666 0E01           00951         movlw   b'00000001'
000668 1245           00952         iorwf   buf_PORTD
                      00953 
00066A 6AE8           00954         clrf    WREG
00066C 6611           00955         tstfsz  servo_cons17
00066E 0E02           00956         movlw   b'00000010'
000670 1245           00957         iorwf   buf_PORTD
                      00958 
000672 6AE8           00959         clrf    WREG
000674 6612           00960         tstfsz  servo_cons18
000676 0E04           00961         movlw   b'00000100'
000678 1245           00962         iorwf   buf_PORTD
                      00963 
00067A 6AE8           00964         clrf    WREG
00067C 6613           00965         tstfsz  servo_cons19
00067E 0E08           00966         movlw   b'00001000'
000680 1245           00967         iorwf   buf_PORTD
                      00968 
000682 6AE8           00969         clrf    WREG
000684 6614           00970         tstfsz  servo_cons20
000686 0E10           00971         movlw   b'00010000'
000688 1245           00972         iorwf   buf_PORTD
                      00973 
00068A 6AE8           00974         clrf    WREG
00068C 6615           00975         tstfsz  servo_cons21
00068E 0E20           00976         movlw   b'00100000'
000690 1245           00977         iorwf   buf_PORTD
                      00978 
000692 6AE8           00979         clrf    WREG
000694 6616           00980         tstfsz  servo_cons22
000696 0E40           00981         movlw   b'01000000'
000698 1245           00982         iorwf   buf_PORTD
                      00983 
00069A 6AE8           00984         clrf    WREG
00069C 6617           00985         tstfsz  servo_cons23
00069E 0E80           00986         movlw   b'10000000'
0006A0 1245           00987         iorwf   buf_PORTD
                      00988 
                      00989 
0006A2 5042           00990         movf    buf_PORTA, W
0006A4 6E89           00991         movwf   LATA
0006A6 5044           00992         movf    buf_PORTC, W
0006A8 6E8B           00993         movwf   LATC
0006AA 5043           00994         movf    buf_PORTB, W
0006AC 6E8A           00995         movwf   LATB
0006AE 5046           00996         movf    buf_PORTE, W
0006B0 6E8D           00997         movwf   LATE
0006B2 5045           00998         movf    buf_PORTD, W
0006B4 6E8C           00999         movwf   LATD
                      01000 
0006B6 0012           01001         return
                      01002 
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 41
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01003 
                      01004 
                      01005 
                      01006 ; Eteint le port ou les ports spécifiés par le contenu de 3 octets,
                      01007 ; l'adresse du premier des 3 octets étant spécifié dans W
                      01008 ; Les ports utilisés sont A, B, C, D, E, le port C servant
                      01009 ; à recevoir les ordres pour piloter les servos
                      01010 ; x [0;7]       PORTA [0-4], PORTC [0-2]
                      01011 ; x [8;15]      PORTB [0-5], PORTE [1-2]
                      01012 ; x [16;23]     PORTD [0-7]
                      01013 ; RA0, RA1, RA2, RA3, RA4, RC0, RC1, RC2        -> Servo 0 à 7
                      01014 ; RB0, RB1, RB2, RB3, RB4, RB5, RE0, RE1        -> Servo 8 à 15 
                      01015 ; RD0, RD1, RD2, RD3, RD4, RD5, RD6, RD7        -> Servo 16 à 23
0006B8                01016 clrPort
                      01017 
                      01018         ; Si la consigne courante est 0
                      01019         ; Le ou les servo(s) restent comme il sont, à 1
0006B8 503D           01020         movf    current_cons, W
0006BA E023           01021         bz              _clrPort
                      01022 
                      01023         ; Le premier octet concerne
                      01024         ; les port A et C
0006BC 50E7           01025         movf    INDF1, W
0006BE 0B3F           01026         andlw   b'000111111'
0006C0 1889           01027         xorwf   LATA, W         ; Pour A
0006C2 6E42           01028         movwf   buf_PORTA
                      01029 
0006C4 50E7           01030         movf    INDF1, W
0006C6 46E8           01031         rlncf   WREG
0006C8 46E8           01032         rlncf   WREG
0006CA 46E8           01033         rlncf   WREG
0006CC 0B07           01034         andlw   b'00000111'
0006CE 188B           01035         xorwf   LATC, W         ; Pour C
0006D0 6E44           01036         movwf   buf_PORTC
                      01037 
                      01038         ; Le deuxième octet concerne
                      01039         ; les port B et E
0006D2 50E4           01040         movf    PREINC1, W
0006D4 0B3F           01041         andlw   b'00111111'
0006D6 188A           01042         xorwf   LATB, W         ; Pour B
0006D8 6E43           01043         movwf   buf_PORTB
                      01044 
0006DA 50E6           01045         movf    POSTINC1, W
0006DC 46E8           01046         rlncf   WREG
0006DE 46E8           01047         rlncf   WREG
0006E0 0B03           01048         andlw   b'0000011'
0006E2 188D           01049         xorwf   LATE, W         ; Pour E
0006E4 6E46           01050         movwf   buf_PORTE
                      01051 
                      01052         ; Le dernier octet concerne le port D
0006E6 50E6           01053         movf    POSTINC1, W
0006E8 188C           01054         xorwf   LATD, W         ; Pour D
0006EA 6E45           01055         movwf   buf_PORTD
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 42
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01056 
                      01057         ; Maintenant, on place tout le contenu des buffers ...
                      01058         ; ... dans les ports qui vont bien, ce qui garanti une synchro idéale
0006EC 5042           01059         movf    buf_PORTA, W
0006EE 6E89           01060         movwf   LATA
0006F0 5044           01061         movf    buf_PORTC, W
0006F2 6E8B           01062         movwf   LATC
0006F4 5043           01063         movf    buf_PORTB, W
0006F6 6E8A           01064         movwf   LATB
0006F8 5046           01065         movf    buf_PORTE, W
0006FA 6E8D           01066         movwf   LATE
0006FC 5045           01067         movf    buf_PORTD, W
0006FE 6E8C           01068         movwf   LATD
                      01069 
000700 0012           01070         return
                      01071 
                      01072 ; Rattrapage du temps en cas de consigne nul
                      01073 ; Ne surtout pas modifier
000702                01074 _clrPort
                      01075 
000702 2AE1           01076         incf    FSR1L
000704 2AE1           01077         incf    FSR1L
000706 2AE1           01078         incf    FSR1L
000708 0000           01079         nop
00070A 0000           01080         nop
00070C 0000           01081         nop
00070E 0000           01082         nop
000710 0000           01083         nop
000712 0000           01084         nop
000714 0000           01085         nop
                      01086 
000716 0000           01087         nop
000718 0000           01088         nop
00071A 0000           01089         nop
00071C 0000           01090         nop
00071E 0000           01091         nop
000720 0000           01092         nop
000722 0000           01093         nop
000724 0000           01094         nop
000726 0000           01095         nop
000728 0000           01096         nop
                      01097 
00072A 0000           01098         nop
00072C 0000           01099         nop
00072E 0000           01100         nop
000730 0000           01101         nop
000732 0000           01102         nop
000734 0000           01103         nop
000736 0000           01104         nop
000738 0000           01105         nop
00073A 0000           01106         nop
00073C 0000           01107         nop
                      01108 
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 43
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00073E 0000           01109         nop
000740 0000           01110         nop
000742 0000           01111         nop
                      01112 
000744 0012           01113         return
                      01114 
                      01115 
                      01116 
                      01117 ; Tri !
                      01118 ; TODO: refaire tout le code de tri ci dessous !
                      01119 ; il doit y avoir moyen d'économiser beaucoup de temps CPU...
000746                01120 sort
                      01121 
000746 EE00 F018      01122         lfsr    FSR0, servo_sorted      ; Pointeur des servos triés
00074A EE11 F018      01123         lfsr    FSR1, servo_val00       ; Pointeur des ports actifs
00074E EE21 F000      01124         lfsr    FSR2, servo_nbr00       ; Pointeur de la quantité courante
                      01125 
000752 CFE9 F051      01126         movff   FSR0L, tmp_FSR0L
000756 CFE2 F053      01127         movff   FSR1H, tmp_FSR1H
00075A CFE1 F052      01128         movff   FSR1L, tmp_FSR1L
00075E CFD9 F054      01129         movff   FSR2L, tmp_FSR2L
                      01130 
000762 6A4A           01131         clrf    var_max
                      01132 
000764 0E18           01133         movlw   NBR_SERVO
000766 6E50           01134         movwf   cmpt_bcl
                      01135 
000768                01136 sort_
                      01137 
                      01138         ; Initialisation des variables, pointeurs...
000768 EE00 F000      01139         lfsr    FSR0, servo_cons0       ; Pointeur de consignes
00076C EE10 F04D      01140         lfsr    FSR1, buf_tab0          ; Buffer de données
                      01141 
000770 6849           01142         setf    var_min
                      01143 
000772 6A4D           01144         clrf    buf_tab0
000774 6A4E           01145         clrf    buf_tab1
000776 6A4F           01146         clrf    buf_tab2
                      01147 
000778 0E01           01148         movlw   .1
00077A 6E55           01149         movwf   cmpt
00077C 6E4C           01150         movwf   mask_tmp
                      01151 
00077E 6A56           01152         clrf    bcl
                      01153 
                      01154 ; C'est parti !
000780                01155 _sort
000780 2A56           01156         incf    bcl
000782 0E19           01157         movlw   NBR_SERVO + 1
000784 6056           01158         cpfslt  bcl                                     ; Si toutes les consignes y sont passées...
000786 D021           01159         bra             _sort_quit                      ; ... on quitte !
                      01160 
000788 0E18           01161         movlw   NBR_SERVO
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 44
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00078A 5C50           01162         subwf   cmpt_bcl, W
00078C E003           01163         bz              _sort_last
                      01164 
00078E 50EF           01165         movf    INDF0, W                        ; Met la consigne courante dans W ...
000790 604A           01166         cpfslt  var_max                         ; ... et test si elle est supérieur à ...
000792 D013           01167         bra             _sort_paf                       ; ... var_max, on poursuit, sinon, on retourne a
                            u début !
                      01168 
000794                01169 _sort_last
000794 50EF           01170         movf    INDF0, W                        ; Met la consigne courante dans W ...
000796 6249           01171         cpfseq  var_min                         ; Si la consigne courante est égale à var_min ...
000798 D004           01172         bra             _sort_next
                      01173 
00079A 504C           01174         movf    mask_tmp, W                     ; ... on va là !
00079C 12E7           01175         iorwf   INDF1
                      01176 
00079E 2A55           01177         incf    cmpt
0007A0 D00C           01178         bra             _sort_paf
                      01179 
0007A2                01180 _sort_next
0007A2 6049           01181         cpfslt  var_min                         ; Si la consigne courante est inférieur à var_min ...
0007A4 D001           01182         bra             _sort_inf
                      01183 
0007A6 D009           01184         bra             _sort_paf
                      01185 
0007A8                01186 _sort_inf
0007A8 50EF           01187         movf    INDF0, W                        ; ... on file ici !
0007AA 6E49           01188         movwf   var_min
                      01189 
0007AC 6A4D           01190         clrf    buf_tab0
0007AE 6A4E           01191         clrf    buf_tab1
0007B0 6A4F           01192         clrf    buf_tab2
0007B2 0E01           01193         movlw   .1
0007B4 6E55           01194         movwf   cmpt
                      01195 
0007B6 504C           01196         movf    mask_tmp, W
0007B8 12E7           01197         iorwf   INDF1
                      01198 
0007BA                01199 _sort_paf
0007BA 90D8           01200         bcf             STATUS, C
0007BC 364C           01201         rlcf    mask_tmp
0007BE A0D8           01202         btfss   STATUS, C
0007C0 D002           01203         bra             _sort_pif
                      01204 
0007C2 364C           01205         rlcf    mask_tmp
0007C4 2AE1           01206         incf    FSR1L
                      01207 
0007C6                01208 _sort_pif
0007C6 2AE9           01209         incf    FSR0L
0007C8 D7DB           01210         bra             _sort
                      01211 
                      01212 
0007CA                01213 _sort_quit
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 45
Gestion de 24 servos !

LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01214 
0007CA 5049           01215         movf    var_min, W
0007CC 6E4A           01216         movwf   var_max
                      01217 
0007CE C051 FFE9      01218         movff   tmp_FSR0L, FSR0L        ; servo_sorted  ->      Pointeur de consignes
0007D2 C053 FFE2      01219         movff   tmp_FSR1H, FSR1H        ; servo_val00   ->      Pointeur des ports actifs
0007D6 C052 FFE1      01220         movff   tmp_FSR1L, FSR1L
0007DA C054 FFD9      01221         movff   tmp_FSR2L, FSR2L        ; servo_nbr00   ->      Pointeur de la quantité courante
                      01222 
0007DE C049 FFEE      01223         movff   var_min, POSTINC0
                      01224 
0007E2 C04D FFE6      01225         movff   buf_tab0, POSTINC1
0007E6 C04E FFE6      01226         movff   buf_tab1, POSTINC1
0007EA C04F FFE6      01227         movff   buf_tab2, POSTINC1
                      01228 
0007EE C055 FFDE      01229         movff   cmpt, POSTINC2
                      01230 
0007F2 CFE9 F051      01231         movff   FSR0L, tmp_FSR0L        ; Sauvegarde des pointeurs
0007F6 CFE2 F053      01232         movff   FSR1H, tmp_FSR1H
0007FA CFE1 F052      01233         movff   FSR1L, tmp_FSR1L
0007FE CFD9 F054      01234         movff   FSR2L, tmp_FSR2L
                      01235 
000802 2E50           01236         decfsz  cmpt_bcl
000804 D7B1           01237         bra             sort_
                      01238 
000806 0012           01239         return
                      01240 
                      01241 
                      01242 
                      01243         END
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 46
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
AN0                               00000000
AN1                               00000001
AN2                               00000002
AN3                               00000003
AN4                               00000005
AN5                               00000000
AN6                               00000001
AN7                               00000002
BANKED                            00000001
BAUD                              .9600
BCLIE                             00000003
BCLIF                             00000003
BCLIP                             00000003
BF                                00000000
BOR                               00000000
BRGH                              00000002
BSR                               00000FE0
C                                 00000000
CCP1                              00000002
CCP1CON                           00000FBD
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2A                             00000003
CCP2CON                           00000FBA
CCP2IE                            00000000
CCP2IF                            00000000
CCP2IP                            00000000
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 47
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCP2_DDRB                         00000003
CCP2_DDRC                         00000001
CCP2_PORTB                        00000003
CCP2_PORTC                        00000001
CCP2_TRISB                        00000003
CCP2_TRISC                        00000001
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CCPR2                             00000FBB
CCPR2H                            00000FBC
CCPR2L                            00000FBB
CFGS                              00000006
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CK                                00000006
CKE                               00000006
CKP                               00000004
CLKO                              00000006
COMMAND_CLEAR                     'C'
COMMAND_INIT                      'I'
COMMAND_PAUSE                     'P'
COMMAND_RESUME                    'R'
COMMAND_SET                       'S'
CONS_ALL_0                        
CREN                              00000004
CS                                00000002
CSRC                              00000007
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DCCPX                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
DDRE                              TRISE
DOFF                              
DON                               
DONE                              00000002
D_A                               00000005
D_NOT_A                           00000005
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 48
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

EEADR                             00000FA9
EECON1                            00000FA6
EECON2                            00000FA7
EEDATA                            00000FA8
EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
FAST                              00000001
FERR                              00000002
FREE                              00000004
FSR0                              00000000
FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1L                             00000FE1
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
GCEN                              00000007
GIE                               00000007
GIEH                              00000007
GIEL                              00000006
GIE_GIEH                          00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
HEADER                            0xFF
I2C_DAT                           00000005
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
INT2E                             00000004
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 49
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON1                           00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTEDG0                           00000006
INTEDG1                           00000005
INTEDG2                           00000004
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IRVST                             00000005
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC3                             00000003
LATC4                             00000004
LATC5                             00000005
LATC6                             00000006
LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 50
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

LATE1                             00000001
LATE2                             00000002
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDIN                             00000005
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
MOVLF                             
MOVLFB                            
N                                 00000004
NBR_SERVO                         .24
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_IPEN                          00000007
NOT_PD                            00000002
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_RI                            00000004
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OSC2                              00000006
OSCCON                            00000FD3
OV                                00000003
P                                 00000004
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
PEIE                              00000006
PEIE_GIEL                         00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 51
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

PHASE_1                           0x00
PHASE_2                           0x01
PHASE_3                           0x02
PHASE_4                           0x03
PIE1                              00000F9D
PIE2                              00000FA0
PIR1                              00000F9E
PIR2                              00000FA1
PLUSW0                            00000FEB
PLUSW1                            00000FE3
PLUSW2                            00000FDB
POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
POSTINC1                          00000FE6
POSTINC2                          00000FDE
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
PRODL                             00000FF3
PSA                               00000003
PSP0                              00000000
PSP1                              00000001
PSP2                              00000002
PSP3                              00000003
PSP4                              00000004
PSP5                              00000005
PSP6                              00000006
PSP7                              00000007
PSPIE                             00000007
PSPIF                             00000007
PSPIP                             00000007
PSPMODE                           00000004
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RB0                               00000000
RB1                               00000001
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 52
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
RI                                00000004
RSEN                              00000001
RX                                00000007
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SCK                               00000003
SCL                               00000003
SCS                               00000000
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 53
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

SDA                               00000004
SDI                               00000004
SDO                               00000005
SEN                               00000000
SEND                              
SMP                               00000007
SP0                               00000000
SP1                               00000001
SP2                               00000002
SP3                               00000003
SP4                               00000004
SPBRG                             00000FAF
SPEN                              00000007
SREN                              00000005
SS                                00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
STATUS                            00000FD8
STKFUL                            00000007
STKOVF                            00000007
STKPTR                            00000FFC
STKPTR0                           00000000
STKPTR1                           00000001
STKPTR2                           00000002
STKPTR3                           00000003
STKPTR4                           00000004
STKUNF                            00000006
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
T08BIT                            00000006
T0CKI                             00000004
T0CON                             00000FD5
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0IP                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0SE                              00000004
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 54
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

T1CKI                             00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1INSYNC                          00000002
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000FCA
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3INSYNC                          00000002
T3SYNC                            00000002
TABLAT                            00000FF5
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TMR0                              00000FD6
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1                              00000FCE
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
TMR2                              00000FCC
TMR2IE                            00000001
TMR2IF                            00000001
TMR2IP                            00000001
TMR2ON                            00000002
TMR3                              00000FB2
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TO                                00000003
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 55
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX                                00000006
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 56
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXIP                              00000004
TXREG                             00000FAD
TXSTA                             00000FAC
UA                                00000001
VREFM                             00000002
VREFP                             00000003
W                                 00000000
WCOL                              00000007
WDTCON                            00000FD1
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
X                                 ((XTAL / BAUD) / 64) - 1
XTAL                              .40000000
Z                                 00000002
_BORV_20                          000000FF
_BORV_20_2L                       000000FF
_BORV_27_2L                       000000FB
_BORV_42_2L                       000000F7
_BORV_45_2L                       000000F3
_BOR_OFF_2L                       000000FD
_BOR_ON_2L                        000000FF
_CCP2MX_OFF                       000000FE
_CCP2MX_OFF_3H                    000000FE
_CCP2MX_ON                        000000FF
_CCP2MX_ON_3H                     000000FF
_CONFIG1H                         00300001
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CP2_OFF_5L                       000000FF
_CP2_ON_5L                        000000FB
_CP3_OFF_5L                       000000FF
_CP3_ON_5L                        000000F7
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
_CPD_ON_5H                        0000007F
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 57
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTR2_OFF_7L                     000000FF
_EBTR2_ON_7L                      000000FB
_EBTR3_OFF_7L                     000000FF
_EBTR3_ON_7L                      000000F7
_EBTRB_OFF_7H                     000000FF
_EBTRB_ON_7H                      000000BF
_ECIO_OSC                         000000FD
_ECIO_OSC_1H                      000000FD
_EC_OSC                           000000FC
_EC_OSC_1H                        000000FC
_HSPLL_OSC                        000000FE
_HSPLL_OSC_1H                     000000FE
_HS_OSC                           000000FA
_HS_OSC_1H                        000000FA
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
_LP_OSC                           000000F8
_LP_OSC_1H                        000000F8
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_OSCS_OFF_1H                      000000FF
_OSCS_ON_1H                       000000DF
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_RCIO_OSC                         000000FF
_RCIO_OSC_1H                      000000FF
_RC_OSC                           000000FB
_RC_OSC_1H                        000000FB
_STVR_OFF_4L                      000000FE
_STVR_ON_4L                       000000FF
_WDTPS_128_2H                     000000FF
_WDTPS_16_2H                      000000F9
_WDTPS_1_2H                       000000F1
_WDTPS_2_2H                       000000F3
_WDTPS_32_2H                      000000FB
_WDTPS_4_2H                       000000F5
_WDTPS_64_2H                      000000FD
_WDTPS_8_2H                       000000F7
_WDT_OFF_2H                       000000FE
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 58
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

_WDT_ON_2H                        000000FF
_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRT2_OFF_6L                      000000FF
_WRT2_ON_6L                       000000FB
_WRT3_OFF_6L                      000000FF
_WRT3_ON_6L                       000000F7
_WRTB_OFF_6H                      000000FF
_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_XT_OSC                           000000F9
_XT_OSC_1H                        000000F9
__18F452                          00000001
_clrPort                          00000702
_init                             000002BC
_int1_usart_clear                 000000D4
_int1_usart_received_send_ack     000000BC
_int1_usart_received_test_clear   0000009C
_int1_usart_received_test_init    00000068
_int1_usart_received_test_pause   0000007C
_int1_usart_received_test_resume  0000008E
_int1_usart_received_test_set     0000005C
_inth_Timer                       000001C6
_intl_usart                       0000003E
_intl_usart_end                   000001BE
_intl_usart_exit                  000001C0
_intl_usart_received_test_comman  00000054
_intl_usart_received_test_contro  000001BA
_intl_usart_received_test_pos0    000000DA
_intl_usart_received_test_pos1    000000EA
_intl_usart_received_test_pos10   0000017A
_intl_usart_received_test_pos11   0000018A
_intl_usart_received_test_pos12   0000019A
_intl_usart_received_test_pos13   000001AA
_intl_usart_received_test_pos2    000000FA
_intl_usart_received_test_pos3    0000010A
_intl_usart_received_test_pos4    0000011A
_intl_usart_received_test_pos5    0000012A
_intl_usart_received_test_pos6    0000013A
_intl_usart_received_test_pos7    0000014A
_intl_usart_received_test_pos8    0000015A
_intl_usart_received_test_pos9    0000016A
_intl_usart_unknow_command        000000CA
_sort                             00000780
_sort_inf                         000007A8
_sort_last                        00000794
_sort_next                        000007A2
_sort_paf                         000007BA
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 59
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

_sort_pif                         000007C6
_sort_quit                        000007CA
ack                               00000540
bcl                               00000056
bcl_toto                          000001E2
buf_PORTA                         00000042
buf_PORTB                         00000043
buf_PORTC                         00000044
buf_PORTD                         00000045
buf_PORTE                         00000046
buf_tab0                          0000004D
buf_tab1                          0000004E
buf_tab2                          0000004F
clearAllOut                       000005C4
clrPort                           000006B8
cmpt                              00000055
cmpt_bcl                          00000050
cmpt_pass                         0000003C
cons_prec                         00000041
csaving_IN_FSR2H                  0000006A
csaving_IN_FSR2L                  00000069
csaving_OUT_FSR2H                 0000006C
csaving_OUT_FSR2L                 0000006B
current_cons                      0000003D
current_qnt                       0000003F
current_servo                     0000003E
inth                              0000001C
inth_end                          000002B6
intl                              00000036
main                              00000512
mask                              0000004B
mask_tmp                          0000004C
nack                              00000584
pause_mode                        00000067
phase                             00000047
phase2                            00000266
phase3                            0000028C
phase4                            000002A2
phase_cmpt                        00000048
pos_0                             00000058
pos_1                             00000059
pos_10                            00000062
pos_11                            00000063
pos_12                            00000064
pos_13                            00000065
pos_2                             0000005A
pos_3                             0000005B
pos_4                             0000005C
pos_5                             0000005D
pos_6                             0000005E
pos_7                             0000005F
pos_8                             00000060
pos_9                             00000061
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 60
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

received_counter                  00000057
reception_control                 00000066
servo_cons0                       00000000
servo_cons1                       00000001
servo_cons10                      0000000A
servo_cons11                      0000000B
servo_cons12                      0000000C
servo_cons13                      0000000D
servo_cons14                      0000000E
servo_cons15                      0000000F
servo_cons16                      00000010
servo_cons17                      00000011
servo_cons18                      00000012
servo_cons19                      00000013
servo_cons2                       00000002
servo_cons20                      00000014
servo_cons21                      00000015
servo_cons22                      00000016
servo_cons23                      00000017
servo_cons3                       00000003
servo_cons4                       00000004
servo_cons5                       00000005
servo_cons6                       00000006
servo_cons7                       00000007
servo_cons8                       00000008
servo_cons9                       00000009
servo_nbr00                       00000100
servo_nbr01                       00000101
servo_nbr02                       00000102
servo_nbr03                       00000103
servo_nbr04                       00000104
servo_nbr05                       00000105
servo_nbr06                       00000106
servo_nbr07                       00000107
servo_nbr08                       00000108
servo_nbr09                       00000109
servo_nbr10                       0000010A
servo_nbr11                       0000010B
servo_nbr12                       0000010C
servo_nbr13                       0000010D
servo_nbr14                       0000010E
servo_nbr15                       0000010F
servo_nbr16                       00000110
servo_nbr17                       00000111
servo_nbr18                       00000112
servo_nbr19                       00000113
servo_nbr20                       00000114
servo_nbr21                       00000115
servo_nbr22                       00000116
servo_nbr23                       00000117
servo_sorted                      00000018
servo_val00                       00000118
servo_val01                       00000119
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 61
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

servo_val02                       0000011A
servo_val03                       0000011B
servo_val04                       0000011C
servo_val05                       0000011D
servo_val06                       0000011E
servo_val07                       0000011F
servo_val08                       00000120
servo_val09                       00000121
servo_val10                       00000122
servo_val11                       00000123
servo_val12                       00000124
servo_val13                       00000125
servo_val14                       00000126
servo_val15                       00000127
servo_val16                       00000128
servo_val17                       00000129
servo_val18                       0000012A
servo_val19                       0000012B
servo_val20                       0000012C
servo_val21                       0000012D
servo_val22                       0000012E
servo_val23                       0000012F
servo_val24                       00000130
servo_val25                       00000131
servo_val26                       00000132
servo_val27                       00000133
servo_val28                       00000134
servo_val29                       00000135
servo_val30                       00000136
servo_val31                       00000137
servo_val32                       00000138
servo_val33                       00000139
servo_val34                       0000013A
servo_val35                       0000013B
servo_val36                       0000013C
servo_val37                       0000013D
servo_val38                       0000013E
servo_val39                       0000013F
servo_val40                       00000140
servo_val41                       00000141
servo_val42                       00000142
servo_val43                       00000143
servo_val44                       00000144
servo_val45                       00000145
servo_val46                       00000146
servo_val47                       00000147
servo_val48                       00000148
servo_val49                       00000149
servo_val50                       0000014A
servo_val51                       0000014B
servo_val52                       0000014C
servo_val53                       0000014D
servo_val54                       0000014E
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 62
Gestion de 24 servos !

SYMBOL TABLE
  LABEL                             VALUE 

servo_val55                       0000014F
servo_val56                       00000150
servo_val57                       00000151
servo_val58                       00000152
servo_val59                       00000153
servo_val60                       00000154
servo_val61                       00000155
servo_val62                       00000156
servo_val63                       00000157
servo_val64                       00000158
servo_val65                       00000159
servo_val66                       0000015A
servo_val67                       0000015B
servo_val68                       0000015C
servo_val69                       0000015D
servo_val70                       0000015E
servo_val71                       0000015F
setAllPort                        000005D8
setValue                          00000592
sort                              00000746
sort_                             00000768
tmp_FSR0L                         00000051
tmp_FSR1H                         00000053
tmp_FSR1L                         00000052
tmp_FSR2L                         00000054
total_qnt                         00000040
var_max                           0000004A
var_min                           00000049
wreg_backup                       00000068


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXXX----XXXX---- --------XXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.48                          MAIN.ASM   1-19-2013  22:01:51         PAGE 63
Gestion de 24 servos !

MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0440 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0480 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
04C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0500 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0540 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0580 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
05C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0600 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0640 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0680 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
06C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0700 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0740 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0780 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
07C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0800 : XXXXXXXX-------- ---------------- ---------------- ----------------
0000 : XXXX--XXXXXXXX-- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Bytes Used:  2052
Program Memory Bytes Free: 30716


Errors   :     0
Warnings :     9 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

